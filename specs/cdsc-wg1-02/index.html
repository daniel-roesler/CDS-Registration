<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Linux Foundation Energy - Carbon Data Specification Consortium (CDSC) - Connectivity Working Group (WG1) - Specifications - cdsc-wg1-02 - Client Registration">
        <link rel="icon" type="image/png" href="/Connectivity/assets/favicon.png">
        <meta name="robots" content="noindex, nofollow"/>
        <title>CDSC-WG1 - CDSC-WG1 - 02 Client Registration - Specification</title>
        <link href="/Connectivity/assets/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            /* Permalink styling */
            .permalink {
                text-decoration:none;
                font-size: 60%;
                display: inline-block;
                vertical-align: top;
                padding-top: 0.4em;
            }
            /* Code section styling */
            pre.highlight {
                background-color: #eee;
                padding: 0.5em;
            }
            /* SVG icons (based on https://github.com/diafygi/svg-font-to-svg-sprite-converter)
               Example (put "svgicons: fa-link, fa-plus-circle" in front matter):
               <svg class="svgicon"><use href="#fa-link"/></svg>
               <svg class="svgicon"><use href="#fa-plus-circle"/></svg>
            */
            #svgicon-defs{
                display: none;
            }
            .svgicon {
                overflow: visible !important;
                height: 0.7em;
                width: 0.7em;
                fill:currentColor;
            }
        </style>
    </head>
    <body>
        <!-- SVG Icons (see comment in css above on how to use) -->
        <svg id="svgicon-defs" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <symbol id="fa-external-link" viewBox="0 0 1792 1792" overflow="visible">
    <path d="M1408 928v320q0 119 -84.5 203.5t-203.5 84.5h-832q-119 0 -203.5 -84.5t-84.5 -203.5v-832q0 -119 84.5 -203.5t203.5 -84.5h704q14 0 23 9t9 23v64q0 14 -9 23t-23 9h-704q-66 0 -113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113 -47t47 -113v-320q0 -14 9 -23t23 -9h64q14 0 23 9t9 23zM1792 64v512q0 26 -19 45t-45 19t-45 -19l-176 -176l-652 652q-10 10 -23 10t-23 -10l-114 -114q-10 -10 -10 -23t10 -23l652 -652l-176 -176q-19 -19 -19 -45t19 -45t45 -19h512q26 0 45 19t19 45z"></path>
</symbol>

                
                
            </defs>
        </svg>

        <!-- Non-production Warning -->
        <div id="non-prod-warning" class="bg-danger text-light text-center p-2 d-none">
            <strong>
                WARNING: THIS IS A DEVELOPMENT VERSION OF THE CDSC-WG1 WEBSITE
                <span class="d-inline-block">
                    (this message does not appear on
                    <a class="text-light" href="https://connectivity.carbondataspec.org">connectivity.carbondataspec.org</a>)
                </span>
            </strong>
        </div>
        <script>
            if (window.location.hostname.indexOf("connectivity.carbondataspec.org") === -1) {
                document.getElementById("non-prod-warning").classList.remove("d-none");
            }
        </script>

        <!-- Header -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a
                    class="navbar-brand"
                    href="/Connectivity/"
                    >CDSC-WG1</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#header"
                    aria-controls="header"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="header">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                
                                href="/Connectivity/"
                                >Home</a>
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                
                                href="/Connectivity/use-cases"
                                >Use Cases</a>
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link active text-decoration-underline"
                                
                                href="/Connectivity/specs"
                                >Specifications</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/carbon-data-specification/Connectivity/tree/main/meetings" target="_blank"
                                >Meeting Minutes
                                <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Content -->
        <div role="main" class="container pt-3 pb-5">
            <div class="row">
                <div class="col">
                    <p><a href="/Connectivity/">Home</a> / <a href="/Connectivity/specs">Specifications</a> / <code class="language-plaintext highlighter-rouge">cdsc-wg1-02</code> - Client Registration</p>

<h1 id="client-registration">Client Registration</h1>

<p>Looking for a more human-readable summary of this specification? Check out our <a href="/Connectivity/specs/cdsc-wg1-02/overview">overview</a>.</p>

<p>Below is a rendering of the original specification source: <a href="https://github.com/daniel-utilityapi/Connectivity/blob/main/specifications/cdsc-wg1-02.md">https://github.com/daniel-utilityapi/Connectivity/blob/main/specifications/cdsc-wg1-02.md</a></p>

<hr />

<h1 id="cdsc-wg1-02---client-registration">CDSC-WG1-02 - Client Registration</h1>

<h2 id="abstract-">Abstract <a id="abstract" href="#abstract" class="permalink">üîó</a></h2>

<p>This specification defines how utilities and other central entities (‚ÄúServers‚Äù) may allow third parties (‚ÄúClients‚Äù) to register, configure, and maintain connectivity with the utility or other central entity. This specification mostly extends various OAuth specifications (<a href="https://www.rfc-editor.org/rfc/rfc7591">Dynamic Client Registration</a>, <a href="https://www.rfc-editor.org/rfc/rfc8414">Authorization Server Metadata</a>, and more) to create a robust framework for offering secure, streamlined, and standardized connectivity between utilities and third parties.</p>

<h2 id="status-">Status <a id="status" href="#status" class="permalink">üîó</a></h2>

<p><b style="color:red">WARNING: This specification is a DRAFT and has not achieved consensus by the working group.</b></p>

<h2 id="copyright-">Copyright <a id="copyright" href="#copyright" class="permalink">üîó</a></h2>

<p><span style="background-color:yellow">TODO</span></p>

<h2 id="table-of-contents-">Table of Contents <a id="table-of-contents" href="#table-of-contents" class="permalink">üîó</a></h2>

<ul>
  <li><a href="#introduction">1. Introduction</a></li>
  <li><a href="#terminology">2. Terminology</a></li>
  <li><a href="#auth-server-metadata">3. Authorization Server Metadata</a>
    <ul>
      <li><a href="#auth-server-metadata-url">3.1. Metadata URL</a></li>
      <li><a href="#auth-server-metadata-format">3.2. Metadata Object Format</a></li>
      <li><a href="#scope-descriptions-format">3.3. Scope Descriptions Object Format</a></li>
      <li><a href="#registration-field-format">3.4. Registration Field Object Format</a></li>
      <li><a href="#registration-field-types">3.5. Registration Field Types</a></li>
      <li><a href="#registration-field-formats">3.6. Registration Field Formats</a></li>
      <li><a href="#auth-details-fields-format">3.7. Authorization Details Field Object Format</a></li>
      <li><a href="#auth-details-field-formats">3.8. Authorization Details Field Formats</a></li>
    </ul>
  </li>
  <li><a href="#client-registration-process">4. Client Registration Process</a>
    <ul>
      <li><a href="#registration-request">4.1. Client Registration Request</a></li>
      <li><a href="#registration-response">4.2. Client Registration Response</a></li>
    </ul>
  </li>
  <li><a href="#clients-api">5. Clients API</a>
    <ul>
      <li><a href="#client-format">5.1. Client Object Format</a></li>
      <li><a href="#clients-list">5.2. Listing Clients</a></li>
      <li><a href="#clients-get">5.3. Retrieving Individual Clients</a></li>
      <li><a href="#clients-modify">5.4. Modifying Clients</a></li>
    </ul>
  </li>
  <li><a href="#client-settings-api">6. Client Settings API</a>
    <ul>
      <li><a href="#client-settings-format">6.1. Client Settings Object Format</a></li>
      <li><a href="#profile-visibility">6.2. Profile Visibility</a></li>
      <li><a href="#button-styles">6.3. Button Styles</a></li>
      <li><a href="#clients-settings-modify">6.4. Modifying Client Settings</a></li>
    </ul>
  </li>
  <li><a href="#client-updates-api">7. Client Updates API</a>
    <ul>
      <li><a href="#client-update-format">7.1. Client Update Object Format</a></li>
      <li><a href="#client-update-types">7.2. Client Update Types</a></li>
      <li><a href="#client-update-statuses">7.3. Client Update Statuses</a></li>
      <li><a href="#client-update-request-format">7.4. Client Update Request Object Format</a></li>
      <li><a href="#clients-updates-list">7.5. Listing Client Updates</a></li>
      <li><a href="#clients-updates-create">7.6. Creating Client Updates</a></li>
      <li><a href="#clients-updates-modify">7.7. Modifying Client Updates</a></li>
    </ul>
  </li>
  <li><a href="#scope-creds-api">8. Scope Credentials API</a>
    <ul>
      <li><a href="#scope-creds-format">8.1. Scope Credentials Object Format</a></li>
      <li><a href="#scope-creds-statuses">8.2. Scope Credentials Statuses</a></li>
      <li><a href="#auth-request-scope-evaluation">8.3. Evaluating Authorization Requests</a></li>
      <li><a href="#scope-creds-list">8.4. Listing Scope Credentials</a></li>
      <li><a href="#scope-creds-get">8.5. Retrieving Individual Scope Credentials</a></li>
      <li><a href="#scope-creds-create">8.6. Creating Scope Credentials</a></li>
      <li><a href="#scope-creds-modify">8.7. Modifying Scope Credentials</a></li>
    </ul>
  </li>
  <li><a href="#grants-api">9. Grants API</a>
    <ul>
      <li><a href="#grant-format">9.1. Grant Object Format</a></li>
      <li><a href="#grant-statuses">9.2. Grant Statuses</a></li>
      <li><a href="#grants-list">9.3. Listing Grants</a></li>
      <li><a href="#grants-get">9.4. Retrieving Individual Grants</a></li>
      <li><a href="#grants-modify">9.5. Modifying Grants</a></li>
    </ul>
  </li>
  <li><a href="#directory-api">10. Directory API</a>
    <ul>
      <li><a href="#directory-entry-format">10.1. Directory Entry Object Format</a></li>
      <li><a href="#directory-list">10.2. Listing Directory Entries</a></li>
      <li><a href="#public-directory">10.3. Publicly Accessible Web Directory</a></li>
    </ul>
  </li>
  <li><a href="#extensions">11. Extensions</a></li>
  <li><a href="#examples">12. Examples</a></li>
  <li><a href="#security">13. Security Considerations</a>
    <ul>
      <li><a href="#restricted-access">13.1. Restricted Access</a></li>
      <li><a href="#rate-limiting">13.2. Rate Limiting</a></li>
    </ul>
  </li>
  <li><a href="#references">14. References</a></li>
  <li><a href="#acknowledgments">15. Acknowledgments</a></li>
  <li><a href="#authors-addresses">16. Authors‚Äô Addresses</a></li>
</ul>

<h2 id="1-introduction-">1. Introduction <a id="introduction" href="#introduction" class="permalink">üîó</a></h2>

<p>This specification was developed as part of the global effort to combat the climate crisis.
Specifically, in order to scalably measure carbon emissions of organizations and calculate the impact of deploying and operating clean energy technologies, companies need an efficient means to register and interact with energy utilities and other similar entities.</p>

<p>There are thousands of utilities serving customers across the world, and each have their own way of providing access to privileged functionality and data.
This specification defines a way for these utilities and other entities (‚ÄúServers‚Äù) to provide a standardized, structured process for external users and companies (‚ÄúClients‚Äù) to register and obtain secure access to privileged functionality and data.
By offering a standardized Client registration and management protocol, utilities and other entities can enable secure interoperability with other external systems providing climate-change fighting services such as carbon tracking, decarbonization measures, grid flexibility capabilities, and energy benchmarking.</p>

<p>This specification does NOT describe what specific privileged functionality or data is offered to Clients as part of their registration.
Instead, relevant stakeholders are encouraged to write <a href="#extensions">Extensions</a> to this specification that enable various use cases that need access to privileged functionality or data.
For example, this specification may be extended to define a method for Clients to be able to access customer-authorized energy usage data.</p>

<h2 id="2-terminology-">2. Terminology <a id="terminology" href="#terminology" class="permalink">üîó</a></h2>

<p><a id="server" href="#server" class="permalink">üîó</a> <strong>‚ÄúServer‚Äù</strong> - The entity hosting the specified endpoints.
A Server can be an energy utility or another type of entity that want to provide access to privileged functionality or data.
These entities can include, but are not limited to, distribution utilities, grid operators, electric retailers, community choice aggregators, government agencies, data warehouses, and private infrastructure providers.</p>

<p><a id="client" href="#client" class="permalink">üîó</a> <strong>‚ÄúClient‚Äù</strong> - The entity requesting Server‚Äôs metadata endpoints.
A Client can be any organization or user seeking to register with a Server for a specific scope of access.
These entities can include, but are not limited to, carbon tracking applications, electric vehicle companies, clean energy technology providers, commercial utility customers, grid management applications, and energy efficiency organizations.</p>

<p><a id="referenced-technologies" href="#referenced-technologies" class="permalink">üîó</a> Referenced Technologies:
‚Äú<a href="https://www.rfc-editor.org/rfc/rfc9110#name-https-uri-scheme">HTTPS</a>‚Äù,
‚Äú<a href="https://www.rfc-editor.org/rfc/rfc9110#name-methods">Request Methods</a>‚Äù,
‚Äú<a href="https://www.rfc-editor.org/rfc/rfc9110#name-status-codes">Status Codes</a>‚Äù,
‚Äú<a href="https://www.rfc-editor.org/rfc/rfc8259">JSON</a>‚Äù,
‚Äú<a href="https://oauth.net/specs/">OAuth</a>‚Äù,
<span style="background-color:yellow">TODO: add more as needed</span> are defined by their referenced standards documents.</p>

<p><a id="string" href="#string" class="permalink">üîó</a> ‚Äústring‚Äù - A series of unicode characters as defined in <a href="https://www.rfc-editor.org/rfc/rfc8259#section-7">RFC 8259</a>.</p>

<p><a id="integer" href="#integer" class="permalink">üîó</a> ‚Äúinteger‚Äù - A positive integer value as defined by <code class="language-plaintext highlighter-rouge">int</code> in <a href="https://www.rfc-editor.org/rfc/rfc8259#section-6">RFC 8259</a>.</p>

<p><a id="decimal" href="#decimal" class="permalink">üîó</a> ‚Äúdecimal‚Äù - A decimal value as defined by <code class="language-plaintext highlighter-rouge">number</code> in <a href="https://www.rfc-editor.org/rfc/rfc8259#section-6">RFC 8259</a>.</p>

<p><a id="date" href="#date" class="permalink">üîó</a> ‚Äúdate‚Äù - A string representing date in the format of <code class="language-plaintext highlighter-rouge">full-date</code> as defined by <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">RFC 3339</a> (e.g. ‚Äú2024-01-01‚Äù).</p>

<p><a id="datetime" href="#datetime" class="permalink">üîó</a> ‚Äúdatetime‚Äù - A string representing date and time in the format of <code class="language-plaintext highlighter-rouge">date-time</code> as defined by <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">RFC 3339</a> (e.g. ‚Äú2024-01-01T00:00:00Z‚Äù).</p>

<p><a id="url" href="#url" class="permalink">üîó</a> ‚ÄúURL‚Äù - A string representing resource as defined in <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-1.1.3">RFC 3986</a> (e.g. ‚Äúhttps://example.com/page1‚Äù).</p>

<p><a id="key-words" href="#key-words" class="permalink">üîó</a> Key Words: ‚ÄúMUST‚Äù, ‚ÄúMUST NOT‚Äù, ‚ÄúREQUIRED‚Äù, ‚ÄúSHALL‚Äù, ‚ÄúSHALL NOT‚Äù, ‚ÄúSHOULD‚Äù, ‚ÄúSHOULD NOT‚Äù, ‚ÄúRECOMMENDED‚Äù, ‚ÄúNOT RECOMMENDED‚Äù, ‚ÄúMAY‚Äù, and ‚ÄúOPTIONAL‚Äù are defined in accordance with <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>.</p>

<h2 id="3-authorization-server-metadata-">3. Authorization Server Metadata <a id="auth-server-metadata" href="#auth-server-metadata" class="permalink">üîó</a></h2>

<p>To enable automated Client registration, Servers MUST host an endpoint with structured metadata about how to submit a <a href="#registration-request">registration request</a>, as well as functionality and data capabilities offered by the Server.
The requirements for hosting this metadata endpoint follows <a href="https://www.rfc-editor.org/rfc/rfc8414">OAuth 2.0 Authorization Server Metadata</a> with several additions for Carbon Data Specification (CDS) functionality described in the following sections.</p>

<h3 id="31-metadata-url-">3.1. Metadata URL <a id="auth-server-metadata-url" href="#auth-server-metadata-url" class="permalink">üîó</a></h3>

<p>Following OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc8414#section-3">Obtaining Authorization Server Metadata</a> process, a Server‚Äôs Authorization Server Metadata Object is retrieved by making an HTTPS request to a specified URL.</p>

<p>To ensure discoverability to the specified URL, this specification extends <a href="/specs/cdsc-wg1-01/#server-capabilities">CDSC-WG1-01 Server Capabilities</a> to require the following values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">oauth</code> - <em><a href="#string">string</a></em> - (REQUIRED) Including Client Registration via OAuth in the list of a Server‚Äôs available capabilities</li>
</ul>

<p>As well as extending the <a href="/specs/cdsc-wg1-01/#metadata-object-format">CDSC-WG1-01 Metadata Object Format</a> to require the following values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">oauth_metadata</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where Clients can obtain the Server‚Äôs Authorization Server Metadata Object</li>
</ul>

<p>In addition to requiring that the URL be included in the <a href="/specs/cdsc-wg1-01/#metadata-object-format">CDSC-WG1-01 Metadata Object Format</a>, Servers MAY also configure the URL such that it conforms to the default <a href="#https://www.rfc-editor.org/rfc/rfc8414#section-7.3">Well-Known URI</a> format, which can increase interoperability beyond the above specified CDSC-WG1-01 extension.</p>

<h3 id="32-metadata-object-format-">3.2. Metadata Object Format <a id="auth-server-metadata-format" href="#auth-server-metadata-format" class="permalink">üîó</a></h3>

<p>A Server‚Äôs Authorization Server Metadata Object follows OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Authorization Server Metadata</a> object format with the following modifications from OPTIONAL or RECOMMENDED to REQUIRED:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">registration_endpoint</code> - <em><a href="#url">URL</a></em> - (REQUIRED) OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7591">Dynamic Client Registration</a> functionality is required to enable the <a href="#client-registration-process">Client Registration Process</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">scopes_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The scopes in this array MUST represent a union of all scope <code class="language-plaintext highlighter-rouge">id</code> values contained in the <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> objects.</li>
  <li><code class="language-plaintext highlighter-rouge">service_documentation</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Developer documentation is required by the Server to help streamline Client integration.</li>
  <li><code class="language-plaintext highlighter-rouge">op_policy_uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Policies for Clients registering is required.</li>
  <li><code class="language-plaintext highlighter-rouge">op_tos_uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Terms of use for Clients registering is required.</li>
  <li><code class="language-plaintext highlighter-rouge">revocation_endpoint</code> - <em><a href="#url">URL</a></em> - (REQUIRED) OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7009">Token Revocation</a> functionality is required.</li>
  <li><code class="language-plaintext highlighter-rouge">introspection_endpoint</code> - <em><a href="#url">URL</a></em> - (REQUIRED) OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7662">Token Introspection</a> functionality is required.</li>
  <li><code class="language-plaintext highlighter-rouge">code_challenge_methods_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The code challenge methods in this array MUST represent a union of all <code class="language-plaintext highlighter-rouge">code_challenge_methods_supported</code> values contained in the <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> objects.</li>
</ul>

<p>In addition to the standard set of OAuth <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Authorization Server Metadata</a> values, this specification also requires the following OAuth extension capabilities to be included in the metadata object values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">authorization_details_types_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc9396">Rich Authorization Requests</a> functionality is required.
This array of values MUST be the same as <code class="language-plaintext highlighter-rouge">scopes_supported</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">pushed_authorization_request_endpoint</code> - <em><a href="#url">URL</a></em> - (REQUIRED) OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc9126">Pushed Authorization Requests</a> functionality is required.</li>
</ul>

<p>In addition to the above additionally required set of OAuth <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Authorization Server Metadata</a> values, this specification clarifies use of the following OAuth standard values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">response_types_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The response types in this array MUST represent a union of all <code class="language-plaintext highlighter-rouge">response_types_supported</code> values contained in the <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> objects.</li>
  <li><code class="language-plaintext highlighter-rouge">grant_types_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The response types in this array MUST represent a union of all <code class="language-plaintext highlighter-rouge">grant_types_supported</code> values contained in the <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> objects.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint_auth_methods_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The response types in this array MUST represent a union of all <code class="language-plaintext highlighter-rouge">token_endpoint_auth_methods_supported</code> values contained in the <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> object.</li>
</ul>

<p>In addition to OAuth capabilities included in the metadata object, this specification adds the following Carbon Data Specification (CDS) values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cds_oauth_version</code> - <em><a href="#string">string</a></em> - (REQUIRED) The version of the CDS-WG1-02 Client Registration specification that the Server has implemented, which for this version of the specification is <code class="language-plaintext highlighter-rouge">v1</code></li>
  <li><code class="language-plaintext highlighter-rouge">cds_human_registration</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where Clients who do not have the technical capacity to use the <code class="language-plaintext highlighter-rouge">registration_endpoint</code> can visit to manually register a Client using a user device</li>
  <li><code class="language-plaintext highlighter-rouge">cds_human_directory</code> - <em><a href="#url">URL</a></em> - (REQUIRED) A public web interface where users may browse the list of Clients who have registered and set their Client Settings <code class="language-plaintext highlighter-rouge">profile_visibility</code> to <code class="language-plaintext highlighter-rouge">listed</code></li>
  <li><code class="language-plaintext highlighter-rouge">cds_test_accounts</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where Clients can find developer documentation on what test account credentials may be used for testing OAuth <code class="language-plaintext highlighter-rouge">response_type=code</code> authorization requests</li>
  <li><code class="language-plaintext highlighter-rouge">cds_clients_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#clients-api">Clients API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_settings_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#client-settings-api">Client Settings API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_updates_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#client-updates-api">Client Updates API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_scope_credentials_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#scope-creds-api">Scope Credentials API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_grants_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#grants-api">Grants API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_directory_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#directory-api">Directory API</a></li>
  <li><code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> - <em>Map[<a href="#scope-descriptions-format">ScopeDescription</a>]</em> - (REQUIRED) An object providing additional information about what Scope values listed in <code class="language-plaintext highlighter-rouge">scopes_supported</code> mean.
This object MUST include a key for each Scope listed in <code class="language-plaintext highlighter-rouge">scopes_supported</code> with a <a href="#scope-descriptions-format">Scope Description</a> as that key‚Äôs value.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_registration_fields</code> - <em>Map[<a href="#registration-field-format">RegistrationField</a>]</em> - (REQUIRED) An object providing additional information about Registration Field that are referenced in <a href="#scope-descriptions-format">Scope Description‚Äôs</a> <code class="language-plaintext highlighter-rouge">registration_requirements</code> list.
This object MUST include a key for each Registration Field <code class="language-plaintext highlighter-rouge">id</code> included in the <code class="language-plaintext highlighter-rouge">registration_requirements</code> lists in the metadata object with a <a href="#registration-field-format">Registration Field</a> as that key‚Äôs value.
If all <code class="language-plaintext highlighter-rouge">registration_requirements</code> lists are empty, this reference object is an empty object (<code class="language-plaintext highlighter-rouge">{}</code>).</li>
</ul>

<p>Other values not mentioned here but listed in specifications for the Authorization Server Metadata specification or other extensions MAY be included as described in their respective specifications.</p>

<h3 id="33-scope-descriptions-object-format-">3.3. Scope Descriptions Object Format <a id="scope-descriptions-format" href="#scope-descriptions-format" class="permalink">üîó</a></h3>

<p>Scope Description objects are formatted as JSON objects and contain named values. The following values are included in the default list available in scope description objects.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code> - <em><a href="#string">string</a></em> - (REQUIRED) The unique identifier of the scope. This MUST be the same value as the object key the Metadata Object‚Äôs <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> object.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable name of the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable description of what access or actions the scope will enable.</li>
  <li><code class="language-plaintext highlighter-rouge">documentation</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where developers can find documentation for the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">registration_requirements</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) A list of any registration fields that MUST be submitted with <a href="#registration-request">Client Registration Requests</a> or requirements that must be completed after registration before the scope is available to use in the Server‚Äôs production environment.
All values in this array MUST be included in the Metadata Object‚Äôs <code class="language-plaintext highlighter-rouge">cds_registration_fields</code> object for a complete description of the requirement.
If no additional requirements are needed, this value is an empty array (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">registration_optional</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) A list of any registration fields that Clients MAY submit with the <a href="#registration-request">Client Registration Requests</a>.
If no additional fields are available, this value is an empty array (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">response_types_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The OAuth <code class="language-plaintext highlighter-rouge">response_type</code> values that can be used with this scope.
This value follows the same behavior as OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Metadata object <code class="language-plaintext highlighter-rouge">response_types_supported</code></a>, except that this value represents the response types supported for this individual scope and not all scopes for the Client.
If a scope is not available for OAuth authorization requests (e.g. a <code class="language-plaintext highlighter-rouge">client_credentials</code>-only scope), this value is an empty array (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">grant_types_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The OAuth grant type values that can be used with this scope.
This value follows the same behavior as OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Metadata object <code class="language-plaintext highlighter-rouge">grant_types_supported</code></a>, except that this value represents the grant types supported for this individual scope and not all scopes for the Client.
This array MUST contain at least one grant type.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint_auth_methods_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) The OAuth client authentication methods that can be used for granting tokens with this scope.
This value follows the same behavior as OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc8414#section-2">Metadata object <code class="language-plaintext highlighter-rouge">token_endpoint_auth_methods_supported</code></a>, except that this value represents the client authentication methods supported for this individual scope and not all scopes for the Client. A value of <code class="language-plaintext highlighter-rouge">"none"</code> this array indicates that the scope may be used for public application without using a client secret.</li>
  <li><code class="language-plaintext highlighter-rouge">code_challenge_methods_supported</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) For scope descriptions where <code class="language-plaintext highlighter-rouge">grant_types_supported</code> includes the value <code class="language-plaintext highlighter-rouge">authorization_code</code>, OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7636">Proof Key for Code Exchange by OAuth Public Clients</a> functionality is required, and Servers MUST offer <code class="language-plaintext highlighter-rouge">S256</code> and MUST NOT offer <code class="language-plaintext highlighter-rouge">plain</code> code verifier methods. For scope descriptions where  <code class="language-plaintext highlighter-rouge">grant_types_supported</code> does not include <code class="language-plaintext highlighter-rouge">authorization_code</code>, no authorization request is performed, so no code challenge is required and this field value is and empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details_fields</code> - <em>Array[<a href="#auth-details-fields-format">AuthorizationDetailsField</a>]</em> - (REQUIRED) A list of fields that MAY be included in <a href="https://www.rfc-editor.org/rfc/rfc9396">Rich Authorization Requests</a> the authorization details object for this scope <code class="language-plaintext highlighter-rouge">type</code>.
If no extra authorization details fields are available, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
</ul>

<h3 id="34-registration-field-object-format-">3.4. Registration Field Object Format <a id="registration-field-format" href="#registration-field-format" class="permalink">üîó</a></h3>

<p>Registration Field objects are formatted as JSON objects and contain named values.
The following values are included in the default list available in registration fields objects.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code> - <em><a href="#string">string</a></em> - (REQUIRED) The unique identifier of the registration field.
This MUST be the same value as the object key the Metadata Object‚Äôs <code class="language-plaintext highlighter-rouge">cds_registration_fields</code> object.</li>
  <li><code class="language-plaintext highlighter-rouge">type</code> - <em><a href="#registration-field-types">RegistrationFieldType</a></em> - (REQUIRED) What type of Registration Field this entry is.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable description of what should be submitted or expected for this registration field.</li>
  <li><code class="language-plaintext highlighter-rouge">documentation</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where developers can find more information about this registration field.</li>
  <li><code class="language-plaintext highlighter-rouge">field_name</code> - <em><a href="#string">string</a></em> - (OPTIONAL) If type is <code class="language-plaintext highlighter-rouge">registration_field</code>, this is the name of the field to submit in the <a href="#registration-request">Client Registration Request</a> and MUST start with <code class="language-plaintext highlighter-rouge">cds_</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">format</code> - <em><a href="#registration-field-formats">RegistrationFieldFormats</a></em> - (OPTIONAL) If type is <code class="language-plaintext highlighter-rouge">registration_field</code>, this is the data format that MUST be used in the value of the field.</li>
  <li><code class="language-plaintext highlighter-rouge">default</code> - <em>various</em> - (OPTIONAL) If type is <code class="language-plaintext highlighter-rouge">registration_field</code> and the field is optional, this is the default value that will be used in lieu of the Client submitting a value themselves.
Including this <code class="language-plaintext highlighter-rouge">default</code> value in the object indicates the registration field is optional.</li>
  <li><code class="language-plaintext highlighter-rouge">max_length</code> - <em><a href="#integer">integer</a></em> - (OPTIONAL) If format is one of <code class="language-plaintext highlighter-rouge">string</code>, <code class="language-plaintext highlighter-rouge">string_or_null</code>, <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">url_or_null</code>, <code class="language-plaintext highlighter-rouge">email</code>, or <code class="language-plaintext highlighter-rouge">email_or_null</code>, this is the maximum length of the submitted value, if not <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">max_size</code> - <em><a href="#integer">integer</a></em> - (OPTIONAL) If format is one of <code class="language-plaintext highlighter-rouge">image</code>, <code class="language-plaintext highlighter-rouge">image_or_null</code>, <code class="language-plaintext highlighter-rouge">pdf</code>, or <code class="language-plaintext highlighter-rouge">pdf_or_null</code>, this is the maximum file size of the submitted value before encoding into <a href="https://en.wikipedia.org/wiki/Base64">Base64</a>, if not <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">amount</code> - <em><a href="#decimal">decimal</a></em> - (OPTIONAL) If type is <code class="language-plaintext highlighter-rouge">payment_required</code>, this is the amount in <code class="language-plaintext highlighter-rouge">currency</code> that will be required to complete registration.</li>
  <li><code class="language-plaintext highlighter-rouge">currency</code> - <em><a href="#string">string</a></em> - (OPTIONAL) If type is <code class="language-plaintext highlighter-rouge">payment_required</code>, this is the monetary currency in <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> currency code.</li>
</ul>

<h3 id="35-registration-field-types-">3.5. Registration Field Types <a id="registration-field-types" href="#registration-field-types" class="permalink">üîó</a></h3>

<p>Registration Field types define which type of action the Client or Server will take for that registration field.
Registration Fields can be either something that MUST or MAY be submitted as part of the <a href="#registration-request">Client Registration Request</a>, depending on the submitted scope‚Äôs <code class="language-plaintext highlighter-rouge">registration_requirements</code> and <code class="language-plaintext highlighter-rouge">registration_optional</code> values, or can be something that a Client must do after registration in order to be full approved for use in the production environment.</p>

<p>The following list of strings are an enumerated set of registration field types that are valid <code class="language-plaintext highlighter-rouge">type</code> values in the registration field object.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">registration_field</code> - This field should be submitted with the <a href="#registration-request">Client Registration Request</a> as the <code class="language-plaintext highlighter-rouge">field_name</code>.
This type of registration field MUST also have <code class="language-plaintext highlighter-rouge">field_name</code> and <code class="language-plaintext highlighter-rouge">format</code> values.
If this field is optional as part of registration, <code class="language-plaintext highlighter-rouge">default</code> must also be defined in the registration field object.</li>
  <li><code class="language-plaintext highlighter-rouge">manual_review</code> - This field indicates that the Server will manually review the registration before approving it for production use.
Notifications and communication about the status of this manual review will be conveyed using the <a href="#client-updates-api">Client Updates API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">payment_required</code> - This field indicates that a setup payment will be required before the Server will approve the Client for production use.
Notifications and communication about how to pay and confirmation of payment will be conveyed using the <a href="#client-updates-api">Client Updates API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">email_verification</code> - This field indicates that the Client must verify their email before the Server will approve the Client for production use.
Notifications and communication about how to verify the Client‚Äôs contact email will be conveyed using the <a href="#client-updates-api">Client Updates API</a>.</li>
</ul>

<h3 id="36-registration-field-formats-">3.6. Registration Field Formats <a id="registration-field-formats" href="#registration-field-formats" class="permalink">üîó</a></h3>

<p>Registration Field formats define the data type of submitted values for these fields in <a href="#registration-request">Client Registration Requests</a>.</p>

<p>The following list of strings are an enumerated set of registration field formats that are valid <code class="language-plaintext highlighter-rouge">format</code> values in the registration field object.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">string</code> - If required, a <a href="#string">string</a> value MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">string_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">string</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
  <li><code class="language-plaintext highlighter-rouge">url</code> - If required, a <a href="#url">URL</a> value MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">url_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">url</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
  <li><code class="language-plaintext highlighter-rouge">email</code> - If required, a valid email address string MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">email_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">email</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
  <li><code class="language-plaintext highlighter-rouge">boolean</code> - If required, either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">boolean_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">boolean</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
  <li><code class="language-plaintext highlighter-rouge">image</code> - If required, a valid image file formatted as <code class="language-plaintext highlighter-rouge">image/jpeg</code> or <code class="language-plaintext highlighter-rouge">image/png</code> encoded as a string using <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">image_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">image</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
  <li><code class="language-plaintext highlighter-rouge">pdf</code> - If required, a valid pdf file formatted encoded using <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> as a string MUST be submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">pdf_or_null</code> - Same as <code class="language-plaintext highlighter-rouge">pdf</code>, only with <code class="language-plaintext highlighter-rouge">null</code> being an additional possible value.</li>
</ul>

<h3 id="37-authorization-details-field-object-format-">3.7. Authorization Details Field Object Format <a id="auth-details-fields-format" href="#auth-details-fields-format" class="permalink">üîó</a></h3>

<p>Authorization Details Field objects are formatted as JSON objects and contain named values.
The following values are included in the default list available in authorization details field objects.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code> - <em><a href="#string">string</a></em> - (REQUIRED) The unique identifier of the authorization details field.
This value is used as the key for the field when added to <code class="language-plaintext highlighter-rouge">authorization_details</code> data fields as part of OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc9396">Rich Authorization Requests</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable name of the authorization details field.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable description of what submitting values for this authorization details field means.</li>
  <li><code class="language-plaintext highlighter-rouge">documentation</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where developers can find more information about this authorization details field.</li>
  <li><code class="language-plaintext highlighter-rouge">format</code> - <em><a href="#auth-details-field-formats">AuthorizationDetailsFieldFormats</a></em> - (REQUIRED) The data format that MUST be used in the value of the field when including it as a data field in <code class="language-plaintext highlighter-rouge">authorization_details</code> objects.</li>
  <li><code class="language-plaintext highlighter-rouge">default</code> - <em>various</em> - (REQUIRED) The default value that will be used in lieu of the Client submitting a value themselves.
This is also the value that will be used if a basic OAuth <code class="language-plaintext highlighter-rouge">scope</code> string parameter is used instead of an <code class="language-plaintext highlighter-rouge">authorization_details</code> parameter.</li>
  <li><code class="language-plaintext highlighter-rouge">relative_date_limit</code> - <em><a href="#integer">integer</a></em> - (OPTIONAL) If <code class="language-plaintext highlighter-rouge">format</code> is <code class="language-plaintext highlighter-rouge">relative_or_absolute_date</code>, this is the largest relative date range that may be submitted.
Servers MUST validate both submitted absolute dates and relative dates against the relative date limit, where when comparing to a submitted absolute date, the current Server date in the Server‚Äôs local timezone is used as the relative point of reference.</li>
  <li><code class="language-plaintext highlighter-rouge">absolute_date_limit</code> - <em><a href="#integer">integer</a></em> - (OPTIONAL) If <code class="language-plaintext highlighter-rouge">format</code> is <code class="language-plaintext highlighter-rouge">relative_or_absolute_date</code>, this is the furthest away date that may be submitted.
Servers MUST validate both submitted absolute dates and relative dates against the absolute date limit, where when comparing to a submitted relative date, the current Server date in the Server‚Äôs local timezone is used as the relative point of reference.</li>
  <li><code class="language-plaintext highlighter-rouge">limit</code> - <em><a href="#integer">integer</a></em> - (OPTIONAL) If format is one of <code class="language-plaintext highlighter-rouge">int</code> or <code class="language-plaintext highlighter-rouge">decimal</code>, this is the largest value that can be the submitted.</li>
</ul>

<h3 id="38-authorization-details-field-formats-">3.8. Authorization Details Field Formats <a id="auth-details-field-formats" href="#auth-details-field-formats" class="permalink">üîó</a></h3>

<p>Authorization Details Field formats define the data type of submitted values for these fields in <code class="language-plaintext highlighter-rouge">authorization_details</code> for OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc9396">Rich Authorization Requests</a>.</p>

<p>The following list of strings are an enumerated set of authorization details field formats that are valid <code class="language-plaintext highlighter-rouge">format</code> values in the <a href="#auth-details-fields-format">Authorization Details Field objects</a>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">relative_or_absolute_date</code> - A relative or absolute date string.
Relative dates are formatted as defined by <code class="language-plaintext highlighter-rouge">duration</code> in <a href="https://datatracker.ietf.org/doc/html/rfc3339#appendix-A">RFC 3339 Appendix A</a>.
For example, <code class="language-plaintext highlighter-rouge">P3Y</code> represents a relative date range of 3 years.
Absolute dates are formatted as <a href="#date">date</a> (<code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code>).
For example, <code class="language-plaintext highlighter-rouge">2024-01-02</code> represents the 2nd of January, 2024.
Dates are defined as the date from the perspective of the Server‚Äôs local timezone.</li>
  <li><code class="language-plaintext highlighter-rouge">int</code> - An <a href="#integer">integer</a> value.</li>
  <li><code class="language-plaintext highlighter-rouge">decimal</code> - A <a href="#decimal">decimal</a> value, which can have any number of significant units, but MUST NOT be stored or handled as a float value, in order to retain the precision of the value throughout Server and Client processing.</li>
</ul>

<h2 id="4-client-registration-process-">4. Client Registration Process <a id="client-registration-process" href="#client-registration-process" class="permalink">üîó</a></h2>

<p>OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7591">Dynamic Client Registration</a> is used as the basis for initially registering Clients with Servers.
To perform the dynamic registration process, the Client submits a request to the Server‚Äôs <code class="language-plaintext highlighter-rouge">registration_endpoint</code> provided in the Server‚Äôs <a href="#auth-server-metadata-format">Metadata object</a> as described in <a href="#registration-request">Client Registration Request</a>.
The Server then responds with either an error or a generated Client registration response as described in <a href="#registration-response">Client Registration Response</a>.</p>

<h3 id="41-client-registration-request-">4.1. Client Registration Request <a id="registration-request" href="#registration-request" class="permalink">üîó</a></h3>

<p>This specification requires Clients and Servers follow the process described in OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7591#section-3.1">Client Registration Request</a>, with the following modifications.</p>

<ul>
  <li>Clients MAY submit additional named values that are defined as part of scope <code class="language-plaintext highlighter-rouge">registration_requirements</code> and <code class="language-plaintext highlighter-rouge">registration_optional</code> arrays in <code class="language-plaintext highlighter-rouge">cds_scope_descriptions</code> objects, using the registration field reference‚Äôs <code class="language-plaintext highlighter-rouge">field_name</code> value as the submitted key in the registration request.</li>
</ul>

<h3 id="42-client-registration-response-">4.2. Client Registration Response <a id="registration-response" href="#registration-response" class="permalink">üîó</a></h3>

<p>This specification requires Servers follow the process described in OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7591#section-3.2">Client Registration Response</a>, with the following modifications to OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7591#section-3.2.1">Client Information Response</a> object.</p>

<ul>
  <li>A <code class="language-plaintext highlighter-rouge">client_secret</code> value MUST be present in the response and be limited to <code class="language-plaintext highlighter-rouge">client_admin</code> scope use only.</li>
  <li>The <code class="language-plaintext highlighter-rouge">scope</code> value MUST include the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</li>
  <li>The <code class="language-plaintext highlighter-rouge">redirect_uris</code>, <code class="language-plaintext highlighter-rouge">grant_types</code>, and <code class="language-plaintext highlighter-rouge">response_types</code> values, if included, MUST be dynamically determined by the Server as a union of all of their respective values in the Client‚Äôs <a href="#scope-creds-format">Scope Credentials</a>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> MUST always be set to <code class="language-plaintext highlighter-rouge">client_secret_basic</code>.</li>
</ul>

<p>Additionally, the following named values MUST be included in the response.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cds_server_metadata</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where the Client can find their registration-specific version of the <a href="/specs/cdsc-wg1-01/">CDSC-WG1-01 Server Metadata</a>.
If the Client‚Äôs CDSC server metadata is no different from the public CDSC server metadata, Servers MAY simply link to the public URL.
If this metadata endpoint requires authentication, Servers MUST authenticate Client requests to this endpoint via Bearer access token obtained using OAuth‚Äôs <code class="language-plaintext highlighter-rouge">client_credentials</code> grant with a scope of <code class="language-plaintext highlighter-rouge">client_admin</code>, and reject unauthenticated requests with a <code class="language-plaintext highlighter-rouge">401 Unauthorized</code> response code.
Clients know that they must use a Bearer token when Servers return a <code class="language-plaintext highlighter-rouge">401</code> response code for this endpoint when the Client makes an unauthenticated request to the endpoint.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_clients_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#clients-api">Clients API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_settings_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The url to a Client‚Äôs Settings object for the <a href="#client-settings-api">Client Settings API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_updates_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#client-updates-api">Client Updates API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_scope_credentials_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#scope-creds-api">Scope Credentials API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_grants_api</code> - <em><a href="#url">URL</a></em> - (REQUIRED) The base url for the <a href="#grants-api">Grants API</a>.</li>
</ul>

<p>Upon valid registration, Servers MUST generate a <a href="#scope-creds-list">listed Scope Credential</a> that is scoped to only <code class="language-plaintext highlighter-rouge">client_admin</code>, where the value of the Scope Credential‚Äôs <code class="language-plaintext highlighter-rouge">client_secret</code> and the registration response <code class="language-plaintext highlighter-rouge">client_secret</code> are the same.
Servers MUST also create <a href="#scope-creds-list">listed Scope Credentials</a> that cover all additional valid scopes submitted, if any, where the Scope Credential objects are grouped by scopes that have the same <code class="language-plaintext highlighter-rouge">response_types</code>, <code class="language-plaintext highlighter-rouge">grant_types</code>, and <code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> so as to maximize the number of scopes that may be accessed using the same <code class="language-plaintext highlighter-rouge">client_secret</code>.</p>

<p>Severs MUST assign the submitted <code class="language-plaintext highlighter-rouge">redirect_uris</code> to all <a href="#scope-creds-format">Scope Credentials</a> in the <a href="#scope-creds-api">Scope Credentials API</a> that have <code class="language-plaintext highlighter-rouge">response_types</code>.
Clients MAY subsequently manage which <code class="language-plaintext highlighter-rouge">redirect_uris</code> values are assigned to specific Scope Credentials using the <a href="#scope-creds-api">Scope Credentials API</a>.</p>

<p>While Servers MAY support OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7592">Dynamic Client Registration Management Protocol</a> by including the <code class="language-plaintext highlighter-rouge">registration_client_uri</code> and <code class="language-plaintext highlighter-rouge">registration_access_token</code> values in their registration response, this specification requires that Servers MUST support the <a href="clients-api">Clients API</a> by including the <code class="language-plaintext highlighter-rouge">cds_clients_api</code> value in the registration response as a way for Clients to manage their registrations. The Clients API is needed beyond the OAuth Dynamic Client Registration Management Protocol because as part of registration, Servers MAY create multiple Clients that group the various registered scopes, and OAuth‚Äôs Dynamic Client Registration Management Protocol does not support APIs for listing multiple clients or credentials that are created from a single registration request.</p>

<h2 id="5-clients-api-">5. Clients API <a id="clients-api" href="#clients-api" class="permalink">üîó</a></h2>

<p>This specification requires Servers provide a set of Application Programming Interfaces (APIs) allowing Clients to view and edit their Client registrations.
These APIs are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</p>

<h3 id="51-client-object-format-">5.1. Client Object Format <a id="client-format" href="#client-format" class="permalink">üîó</a></h3>

<p>Client objects are formatted as JSON objects and contain named values.
Client objects are required to follow the same object format as the <a href="#registration-response">Client Registration Response</a>, with the addition of the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cds_created</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Client was created.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_modified</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Client was last modified.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where to submit modifications using the Clients API <a href="#clients-modify">Modifying Clients</a> functionality.
Servers MUST make this URL unique for each Client registration.</li>
</ul>

<p>Additionally, while the <a href="#registration-response">Client Registration Response</a> MUST contain the <code class="language-plaintext highlighter-rouge">client_secret</code> field, Client objects returned from the Clients API MUST NOT include the <code class="language-plaintext highlighter-rouge">client_secret</code> or <code class="language-plaintext highlighter-rouge">client_secret_expires_at</code> fields.
Clients MUST instead use the <a href="#scope-creds-api">Scope Credentials API</a> to obtain <code class="language-plaintext highlighter-rouge">client_secret</code> values for use in other APIs.</p>

<h3 id="52-listing-clients-">5.2. Listing Clients <a id="clients-list" href="#clients-list" class="permalink">üîó</a></h3>

<p>Clients may request to list Client objects that they have access to by making an HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request, authenticated with a valid Bearer <code class="language-plaintext highlighter-rouge">access_token</code> scoped to the <code class="language-plaintext highlighter-rouge">client_admin</code> scope, to the <code class="language-plaintext highlighter-rouge">cds_clients_api</code> URL included in the <a href="#registration-response">Client Registration Response</a>.
The Client listing request responses are formatted as JSON objects and contain the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">clients</code> - <em>Array[<a href="#client-format">Client</a>]</em> - (REQUIRED) A list of Clients to which the requesting <code class="language-plaintext highlighter-rouge">access_token</code> is scoped to have access.
If no Clients are accessible, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
If more than 100 Clients are available to be listed, Servers MAY truncate the list and use the <code class="language-plaintext highlighter-rouge">next</code> value to link to the next segment of the list of Clients.</li>
  <li><code class="language-plaintext highlighter-rouge">next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of Clients.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of Clients.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Listings of Client objects MUST be ordered in reverse chronological order by <code class="language-plaintext highlighter-rouge">cds_modified</code> timestamp, where the most recently updated relevant Client MUST be first in each listing.</p>

<h3 id="53-retrieving-individual-clients-">5.3. Retrieving Individual Clients <a id="clients-get" href="#clients-get" class="permalink">üîó</a></h3>

<p>The URL to be used to send <code class="language-plaintext highlighter-rouge">GET</code> requests for retrieving individual Client objects MUST be the <code class="language-plaintext highlighter-rouge">cds_client_uri</code> provided in the <a href="#client-format">Client object</a>.
If a Server has optionally implemented OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7592">Dynamic Client Registration Management Protocol</a>, the value of <code class="language-plaintext highlighter-rouge">cds_client_uri</code> MUST be the same as <code class="language-plaintext highlighter-rouge">registration_client_uri</code>, and access tokens issued from either a <code class="language-plaintext highlighter-rouge">client_credentials</code> grant with the scope <code class="language-plaintext highlighter-rouge">client_admin</code> or the access token provided as the <code class="language-plaintext highlighter-rouge">registration_access_token</code> MUST be valid access tokens to interact with the client retrieval endpoint (<code class="language-plaintext highlighter-rouge">cds_client_uri</code>).</p>

<h3 id="54-modifying-clients-">5.4. Modifying Clients <a id="clients-modify" href="#clients-modify" class="permalink">üîó</a></h3>

<p>This specification requires that the procedure to modify Clients MUST follow OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7592">Client Update Request</a> section in <a href="https://www.rfc-editor.org/rfc/rfc7592">Dynamic Client Registration Management Protocol</a>.</p>

<p>The URL to be used to send <code class="language-plaintext highlighter-rouge">PUT</code> requests for updating clients MUST be the <code class="language-plaintext highlighter-rouge">cds_client_uri</code> provided in the <a href="#client-format">Client object</a>.
If a Server has optionally implemented OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7592">Dynamic Client Registration Management Protocol</a>, the value of <code class="language-plaintext highlighter-rouge">cds_client_uri</code> MUST be the same as <code class="language-plaintext highlighter-rouge">registration_client_uri</code>, and access tokens issued from either a <code class="language-plaintext highlighter-rouge">client_credentials</code> grant with the scope <code class="language-plaintext highlighter-rouge">client_admin</code> or the access token provided as the <code class="language-plaintext highlighter-rouge">registration_access_token</code> MUST be valid access tokens to interact with the client update endpoint.</p>

<p>Servers MUST ignore updated values to the following fields and keep the Server-defined values set:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">client_id</code> - This value is immutable from when it was assigned upon Client registration.</li>
  <li><code class="language-plaintext highlighter-rouge">client_id_issued_at</code> - This value is immutable from when the Client initially registered.</li>
  <li><code class="language-plaintext highlighter-rouge">client_secret</code> - This value is NOT included in any Client object response, except for the initial Client registration request.
Clients MUST use the <a href="#scope-creds-api">Scope Credentials API</a> to manage client secrets.</li>
  <li><code class="language-plaintext highlighter-rouge">client_secret_expires_at</code> - This value is NOT included in any Client object response, except for the initial Client registration request.
Clients MUST use the <a href="#scope-creds-api">Scope Credentials API</a> to discover when a client secret will expire.</li>
  <li><code class="language-plaintext highlighter-rouge">redirect_uris</code> - This list is dynamically determined by the Server as a union of all <code class="language-plaintext highlighter-rouge">redirect_uris</code> values in the Client‚Äôs <a href="#scope-creds-format">Scope Credentials</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">grant_types</code> - This list is dynamically determined by the Server as a union of all <code class="language-plaintext highlighter-rouge">grant_types</code> values in the Client‚Äôs <a href="#scope-creds-format">Scope Credentials</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">response_types</code> - This list is dynamically determined by the Server as a union of all <code class="language-plaintext highlighter-rouge">response_types</code> values in the Client‚Äôs <a href="#scope-creds-format">Scope Credentials</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> - Always <code class="language-plaintext highlighter-rouge">client_secret_basic</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_server_metadata</code> - This is a URL set by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_clients_api</code> - This is a URL set by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_settings_api</code> - This is a URL set by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_updates_api</code> - This is a URL set by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_scope_credentials_api</code> - This is a URL set by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_grants_api</code> - This is a URL set by the Server.</li>
</ul>

<p>All other fields MAY be submitted for updating by the Client.
However, the Server MUST determine the validity of the submitted Client fields and reject with a 400 Bad Response if not all submitted fields are either the same as previously set, or invalid values for that field.</p>

<p>If a Client does not include a field that is included in the Client object, this indicates that the Client wishes to reset the value of that field to the Server default.</p>

<p>If a Server needs to asynchronously review and approve changes to any submitted Client object fields that have been submitted by the Client and are different from the current values, for valid update requests the Server MUST respond with a <code class="language-plaintext highlighter-rouge">202 Accepted</code> response, which indicates that the submission was accepted but not fully saved as completed yet.
Any fields that have not been synchronously updated as part of the request and response MUST remain in the response as their previous values, and the Server MUST add one or more entries to the <a href="#clients-updates-list">listed Client Updates</a> for the modified fields that need to be asynchronously reviewed and approved.
Clients MAY then use the <a href="#client-updates-api">Client Updates API</a> to track the asynchronous review of the modification request.
If all submitted fields have been synchronously updated as part of the response, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">200 OK</code> response.</p>

<h2 id="6-client-settings-api-">6. Client Settings API <a id="client-settings-api" href="#client-settings-api" class="permalink">üîó</a></h2>

<p>This specification requires Servers provide an API allowing Clients to view and manage their Client settings.
While the settings fields are directly related to a specific registered Client, they are not included in the Client object itself in order to allow Clients to make partial updates to their settings values using an HTTPS <code class="language-plaintext highlighter-rouge">PATCH</code> request instead of a PUT request, which is required for the Client object updates to remain compatible with OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc7592">Dynamic Client Registration Management Protocol</a>.</p>

<p>The Client Settings API are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</p>

<p>Clients request their current <a href="#client-settings-format">Client Settings object</a> my making an authenticated HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request to the <code class="language-plaintext highlighter-rouge">cds_client_settings_api</code> endpoint provided in the <a href="#client-format">Client object</a>.</p>

<h3 id="61-client-settings-object-format-">6.1. Client Settings Object Format <a id="client-settings-format" href="#client-settings-format" class="permalink">üîó</a></h3>

<p>Client Settings objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">default_scope</code> - <em><a href="#string">string</a></em> - (REQUIRED) A space-separated list of scopes the Server will use for OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">Authorization Requests</a> if the Client does not supply a <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code> parameter in the request.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_visibility</code> - <em><a href="#profile-visibility">ProfileVisibility</a></em> - (REQUIRED) This is visibility configuration of a Client in the <a href="#directory-api">Directory API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_visibility_options</code> - <em>Array[<a href="#profile-visibility">ProfileVisibility</a>]</em> - (REQUIRED) This is the list of available Profile Visibility values that the Client may choose to set as their <code class="language-plaintext highlighter-rouge">profile_visibility</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_description</code> - <em><a href="#string">string</a></em> - (REQUIRED) This is the description that the Client wishes to be displayed in their public directory entry, if <code class="language-plaintext highlighter-rouge">profile_visibility</code> is set to <code class="language-plaintext highlighter-rouge">autolist</code>, <code class="language-plaintext highlighter-rouge">unlisted</code>, or <code class="language-plaintext highlighter-rouge">listed</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) This is the URL that links directly to the Client‚Äôs entry in the Server‚Äôs publicly accessible directory web interface, if <code class="language-plaintext highlighter-rouge">profile_visibility</code> is set to <code class="language-plaintext highlighter-rouge">autolist</code>, <code class="language-plaintext highlighter-rouge">unlisted</code>, or <code class="language-plaintext highlighter-rouge">listed</code>.
If a Client has set their <code class="language-plaintext highlighter-rouge">profile_visibility</code> to <code class="language-plaintext highlighter-rouge">disabled</code>, the Server MUST respond to requests to this URL with a 404 Not Found response code.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_slug</code> - <em><a href="#string">string</a></em> - (OPTIONAL) For Servers that have the ability to partially customize the <code class="language-plaintext highlighter-rouge">profile_uri</code> string to be a more human-readable URL, this is the part of the URL that is customizable by the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_uri</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) In the profile entry for a Client, Servers MUST offer the ability for the Client to link users to a Client-provided URL.
Servers MUST implement this as an anchor link styled as one of the specified <a href="#button-styles">Button Styles</a> that opens a new tab via the <code class="language-plaintext highlighter-rouge">target="_blank"</code> anchor attribute for the user.
If a Client sets this value to <code class="language-plaintext highlighter-rouge">null</code>, then the Server MUST NOT render the button link in the Client‚Äôs directory profile entry.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_style</code> - <em><a href="#button-styles">ButtonStyle</a></em> - (REQUIRED) This is the style of button the Server has set for the <code class="language-plaintext highlighter-rouge">profile_button_uri</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_style_options</code> - <em>Array[<a href="#button-styles">ButtonStyle</a>]</em> - (REQUIRED) This is a list of <a href="#button-styles">Button Styles</a> available for the Client to set as their button style in their directory entry.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_name</code> - <em><a href="#string">string</a></em> - (REQUIRED) This the contact name to be listed in the public directory entry for the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_email</code> - <em><a href="https://en.wikipedia.org/wiki/E.123">E.123</a> email address</em> - (REQUIRED) This the contact email to be listed in the public directory entry for the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_phone</code> - <em><a href="https://en.wikipedia.org/wiki/E.123">E.123</a> international phone number or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) This the contact phone number to be listed in the public directory entry for the Client.
If the Client sets this to <code class="language-plaintext highlighter-rouge">null</code>, the phone number field MUST be hidden on the Client‚Äôs public directory profile entry by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_website</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) This is a link to a website the Client wishes the user to visit for more information on how to contact them.
If the Client sets this to <code class="language-plaintext highlighter-rouge">null</code>, the website field MUST be hidden on the Client‚Äôs public directory profile entry by the Server.</li>
</ul>

<h3 id="62-profile-visibility-">6.2. Profile Visibility <a id="profile-visibility" href="#profile-visibility" class="permalink">üîó</a></h3>

<p>Servers MUST make available the following Profile Visibility options in the <code class="language-plaintext highlighter-rouge">profile_visibility_options</code> list:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">listed</code> - Servers MUST include the Client profile entry in both the <a href="#directory-list">Directory API list</a> and <a href="#public-directory">Publicly Accessible Web Directory</a>.
If Servers are asynchronously reviewing Clients before approving production access to scopes, Servers MUST NOT include this option in the list of <code class="language-plaintext highlighter-rouge">profile_visibility_options</code> until the Server has completed and approve the Client for production access to at least one of the non-<code class="language-plaintext highlighter-rouge">client_admin</code> scopes, and instead include <code class="language-plaintext highlighter-rouge">autolist</code> in the list of <code class="language-plaintext highlighter-rouge">profile_visibility_options</code>.
For Client profile entries, Servers MUST NOT render the profile entry with <code class="language-plaintext highlighter-rouge">X-robots-tag</code> or <code class="language-plaintext highlighter-rouge">&lt;meta name="robots" ...&gt;</code> HTML head tags with a value of <code class="language-plaintext highlighter-rouge">noindex</code>, so that Client profile entries may be indexed by web search engines.</li>
  <li><code class="language-plaintext highlighter-rouge">autolist</code> - If Servers are asynchronously reviewing Clients before approving production access to scopes, Servers MUST include this option in the list of <code class="language-plaintext highlighter-rouge">profile_visibility_options</code> until the Server has completed and approve the Client for production access to at least one of the non-<code class="language-plaintext highlighter-rouge">client_admin</code> scopes and NOT include <code class="language-plaintext highlighter-rouge">listed</code> in the list of <code class="language-plaintext highlighter-rouge">profile_visibility_options</code>.
If the Client has set their <code class="language-plaintext highlighter-rouge">profile_visibility</code> to <code class="language-plaintext highlighter-rouge">autolist</code>, when the Server approves at least one non-<code class="language-plaintext highlighter-rouge">client_admin</code> scope for production use, the Server MUST automatically switch the Client‚Äôs <code class="language-plaintext highlighter-rouge">profile_visibility</code> setting from <code class="language-plaintext highlighter-rouge">autolist</code> to <code class="language-plaintext highlighter-rouge">listed</code> and remove <code class="language-plaintext highlighter-rouge">autolist</code> from the list of <code class="language-plaintext highlighter-rouge">profile_visibility_options</code>.
The behavior of this option is the same as the <code class="language-plaintext highlighter-rouge">unlisted</code> Profile Visibility option, with the exception that the Server MUST prominently display a banner message in the rendered profile entry to users that the Client has not yet been approved for production use.</li>
  <li><code class="language-plaintext highlighter-rouge">unlisted</code> - Servers MUST NOT include the Client profile entry in the <a href="#directory-list">Directory API list</a> or <a href="#public-directory">Publicly Accessible Web Directory</a>.
However, the <code class="language-plaintext highlighter-rouge">profile_uri</code> will be publicly visible when requested directly by a user directly and the response to the <code class="language-plaintext highlighter-rouge">profile_uri</code> MUST include a <code class="language-plaintext highlighter-rouge">X-robots-tag</code> response header with <code class="language-plaintext highlighter-rouge">noindex</code> in the header values or a <code class="language-plaintext highlighter-rouge">&lt;meta name="robots" ...&gt;</code> HTML head tag with <code class="language-plaintext highlighter-rouge">noindex</code> included in the <code class="language-plaintext highlighter-rouge">content</code> attribute, so that web search engines do not index the profile entry.</li>
  <li><code class="language-plaintext highlighter-rouge">disabled</code> - Servers MUST NOT include the Client profile entry in the <a href="#directory-list">Directory API list</a> or <a href="#public-directory">Publicly Accessible Web Directory</a>.
The Server MUST also return a 404 Not Found response code for requests made to the Client‚Äôs <code class="language-plaintext highlighter-rouge">profile_uri</code>.</li>
</ul>

<h3 id="63-button-styles-">6.3. Button Styles <a id="button-styles" href="#button-styles" class="permalink">üîó</a></h3>

<p>Clients may have registered to a server for different purposes, so their Client profile entry button links may need to be styled as different actions based on the Client‚Äôs use case.
Servers MUST offer the following button styles for Clients to set as their <code class="language-plaintext highlighter-rouge">profile_button_style</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">authorize</code> - Rendered as a button indicating to the user that the button will allow the user to authorize the Client in some fashion, such as a button saying ‚ÄúAuthorize {client_name}‚Äù.</li>
  <li><code class="language-plaintext highlighter-rouge">link</code> - Rendered as a button indicating to the user that the button will allow the user to link or connect the user‚Äôs account to the Client, such as a button saying ‚ÄúLink your account with {client_name}‚Äù.</li>
  <li><code class="language-plaintext highlighter-rouge">goto</code> - Rendered as a button indicating to the user that the button will allow the user to go to the Client‚Äôs website, such as a button saying ‚ÄúVisit the {client_name} website‚Äù.</li>
</ul>

<h3 id="64-modifying-client-settings-">6.4. Modifying Client Settings <a id="clients-settings-modify" href="#clients-settings-modify" class="permalink">üîó</a></h3>

<p>Clients may modify fields in the Client Settings API by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">PATCH</code> request to the <code class="language-plaintext highlighter-rouge">cds_client_settings_api</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object are the fields the Client intends to update with the submitted fields‚Äô values.
If a field is not included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, the Server MUST leave the field unmodified from its current value.</p>

<p>The following are fields that MAY be included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, and modification MUST be supported by Servers:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">default_scope</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_visibility</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_description</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_slug</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_uri</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_style</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_name</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_email</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_phone</code></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_website</code></li>
</ul>

<p>Servers MUST reject requests with a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response when fields are submitted that are not able to be modified by the Client or the submitted values are invalid.
For valid <code class="language-plaintext highlighter-rouge">PATCH</code> requests from Clients, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">200 OK</code> or <code class="language-plaintext highlighter-rouge">202 Accepted</code> response with an updated JSON object of the complete current Client Settings object.</p>

<p>If a Server needs to asynchronously review and approve changes to any submitted Client Settings object fields that have been submitted by the Client and are different from the current values, for valid modification requests the Server MUST respond with a <code class="language-plaintext highlighter-rouge">202 Accepted</code> response, which indicates that the submission was accepted but not fully saved as completed yet.
Any fields that have not been synchronously updated as part of the request and response MUST remain in the response as their previous values, and the Server MUST add one or more entries to the <a href="#clients-updates-list">listed Client Updates</a> for the modified fields that need to be asynchronously reviewed and approved.
Clients MAY then use the <a href="#client-updates-api">Client Updates API</a> to track the asynchronous review of the modification request.
If all submitted fields have been synchronously updated as part of the response, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">200 OK</code> response.</p>

<h2 id="7-client-updates-api-">7. Client Updates API <a id="client-updates-api" href="#client-updates-api" class="permalink">üîó</a></h2>

<p>To facilitate automated communication and notificatiosn between Servers and Clients, this specification requires that official communication between Servers and Clients be performed using the Client Updates APIs.
Servers MAY implement other means of communications for exchanging messages and notifications, such as email support, but they MUST also mirror any official communications that impact Client or Grant statuses, settings, or access using the Client Updates API.</p>

<p>The Client Updates API endpoints are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</p>

<h3 id="71-client-update-object-format-">7.1. Client Update Object Format <a id="client-update-format" href="#client-update-format" class="permalink">üîó</a></h3>

<p>Client Update objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where to retrieve or modify this specific Client Update object.</li>
  <li><code class="language-plaintext highlighter-rouge">previous_uri</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) Where to find the previous Client Update to which this Client Update has been created as a reply.</li>
  <li><code class="language-plaintext highlighter-rouge">type</code> - <em><a href="#client-update-types">ClientUpdateType</a></em> - (REQUIRED) The type of Client Update.</li>
  <li><code class="language-plaintext highlighter-rouge">read</code> - <em>boolean</em> - (REQUIRED) Whether the object has been marked as read by a Client.
When the Server creates a Client Update, this value MUST be <code class="language-plaintext highlighter-rouge">false</code> by default, so that the Client Update appears in the <a href="#clients-updates-list">unread</a> list.</li>
  <li><code class="language-plaintext highlighter-rouge">creator</code> - <em><a href="#string">string</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) If the Server created the Client Update, this value is <code class="language-plaintext highlighter-rouge">null</code>.
If the Client created the Client Update, this value is the Client‚Äôs <code class="language-plaintext highlighter-rouge">client_id</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">created</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Client Update was created.</li>
  <li><code class="language-plaintext highlighter-rouge">modified</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Client Update was last modified.</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - <em><a href="#client-update-statuses">ClientUpdateStatus</a></em> - (REQUIRED) The current status of the Client Update.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable name of the Client Update.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">notification</code>, <code class="language-plaintext highlighter-rouge">private_message</code>, or <code class="language-plaintext highlighter-rouge">support_request</code>, this is the message subject.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - (REQUIRED) A human-readable description of the Client Update.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">notification</code>, <code class="language-plaintext highlighter-rouge">private_message</code>, or <code class="language-plaintext highlighter-rouge">support_request</code>, this is the message body.</li>
  <li><code class="language-plaintext highlighter-rouge">updates_requested</code> - <em>Array[<a href="#client-update-request-format">ClientUpdateRequest</a>]</em> - (OPTIONAL) The list of values that a Client has requested to be updated.
This field is required for Client Updates with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">field_changes</code> or <code class="language-plaintext highlighter-rouge">server_request</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">related_uri</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (OPTIONAL) If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">notification</code> or <code class="language-plaintext highlighter-rouge">private_message</code>, this value is where the Client can find more information, if available.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">support_request</code>, this value is a relevant URL for which the Client is requesting technical support.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">field_changes</code>, this is where the Client can retrieve the object that has been requested to be modified.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">payment_request</code>, this is where the Client can submit their payment to the Server or if paid, a link to the payment receipt.
If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">server_request</code>, this is where the Client can find more information about what information is being requested by the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">amount</code> - <em><a href="#decimal">decimal</a></em> - (OPTIONAL) If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">payment_request</code>, this amount the Client needs to pay to satisfy the payment request.</li>
  <li><code class="language-plaintext highlighter-rouge">currency</code> - <em><a href="#string">string</a></em> - (OPTIONAL) If the Client Update <code class="language-plaintext highlighter-rouge">type</code> is <code class="language-plaintext highlighter-rouge">payment_request</code>, this is the monetary currency for the <code class="language-plaintext highlighter-rouge">amount</code> in <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> currency code.</li>
</ul>

<h3 id="72-client-update-types-">7.2. Client Update Types <a id="client-update-types" href="#client-update-types" class="permalink">üîó</a></h3>

<p>Client Update object <code class="language-plaintext highlighter-rouge">type</code> values MUST be one of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">notification</code> - The Server is sending the Client at notification message that is relevant to the Client.
This message is considered to be not individually tailored to the Client specifically, but instead directed to all relevant Clients.</li>
  <li><code class="language-plaintext highlighter-rouge">private_message</code> - The Server or Client is sending a private message to the opposite party.
This message is considered to be individually tailored and relevant only to that Client or Server.</li>
  <li><code class="language-plaintext highlighter-rouge">support_request</code> - The Client is submitting a technical support request to the Server.</li>
  <li><code class="language-plaintext highlighter-rouge">field_changes</code> - This Client Update represents that the Client has submitted changes to field values in other API objects, listed in the <code class="language-plaintext highlighter-rouge">updates_requested</code> list, but these changes were not synchronously approved by the Server and need to be reviewed asynchronously by the Server.
While the Client originally triggered this Client Update to be created by submitting field changes that need to be asynchronously reviewed, the Server is responsible for creating this Client Update, so the <code class="language-plaintext highlighter-rouge">creator</code> value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">server_request</code> - The Server is requesting the Client submit a new Client Update of type <code class="language-plaintext highlighter-rouge">client_submission</code> with the fields listed in <code class="language-plaintext highlighter-rouge">updates_requested</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">client_submission</code> - The Client is submitting a response to a <code class="language-plaintext highlighter-rouge">server_request</code> to update one or more fields of a specific object.
Both Clients and Servers may create update requests.</li>
  <li><code class="language-plaintext highlighter-rouge">payment_request</code> - The Server is requesting payment by the Client to complete a financial payment before the Client may proceed with either registration approval or completing actions listed in the <code class="language-plaintext highlighter-rouge">updates_requested</code> list.</li>
</ul>

<h3 id="73-client-update-statuses-">7.3. Client Update Statuses <a id="client-update-statuses" href="#client-update-statuses" class="permalink">üîó</a></h3>

<p>Client Update object <code class="language-plaintext highlighter-rouge">status</code> values MUST be one of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">complete</code> - For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">notification</code>, <code class="language-plaintext highlighter-rouge">private_message</code>, or <code class="language-plaintext highlighter-rouge">client_submission</code>, the <code class="language-plaintext highlighter-rouge">status</code> MUST be set as <code class="language-plaintext highlighter-rouge">complete</code>.
For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">support_request</code>, <code class="language-plaintext highlighter-rouge">field_changes</code>, <code class="language-plaintext highlighter-rouge">server_request</code>, or <code class="language-plaintext highlighter-rouge">payment_request</code>, this represents the Server has completed and approved or resolved the Client‚Äôs technical support request, field changes, submission, or payment.</li>
  <li><code class="language-plaintext highlighter-rouge">open</code> - For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">server_request</code> or <code class="language-plaintext highlighter-rouge">payment_request</code>, this represents that the Client has not yet submitted a response to the Server‚Äôs submission or payment request.</li>
  <li><code class="language-plaintext highlighter-rouge">pending</code> - For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">support_request</code>, <code class="language-plaintext highlighter-rouge">field_changes</code>, <code class="language-plaintext highlighter-rouge">server_request</code>, or <code class="language-plaintext highlighter-rouge">payment_request</code>, this represents the Server has not yet completed it‚Äôs review of the Client‚Äôs technical support request, field changes, submission, or payment.</li>
  <li><code class="language-plaintext highlighter-rouge">rejected</code> - For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">field_changes</code>, <code class="language-plaintext highlighter-rouge">server_request</code>, or <code class="language-plaintext highlighter-rouge">payment_request</code>, this represents the Server has completed and rejected the Client‚Äôs requested field changes, submission, or payment.</li>
  <li><code class="language-plaintext highlighter-rouge">errored</code> - For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">field_changes</code>, <code class="language-plaintext highlighter-rouge">server_request</code>, or <code class="language-plaintext highlighter-rouge">payment_request</code>, this represents the Server encountered an issue while processing the Client‚Äôs field changes, submission, or payment.
The Client is RECOMMENDED to submit a <code class="language-plaintext highlighter-rouge">support_request</code> Client Update with the <code class="language-plaintext highlighter-rouge">related_uri</code> as this Client Update‚Äôs <code class="language-plaintext highlighter-rouge">uri</code>.</li>
</ul>

<h3 id="74-client-update-request-object-format-">7.4. Client Update Request Object Format <a id="client-update-request-format" href="#client-update-request-format" class="permalink">üîó</a></h3>

<p>Client Update Request objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">field</code> - <em><a href="#string">string</a></em> - (REQUIRED) The field name of the field that is being requested to be updated.
For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">field_changes</code>, this is the name of the object‚Äôs field on the API.
For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">server_request</code>, this is the Server‚Äôs identifier for the submission being requested from the client.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - <em><a href="#string">string</a></em> - (OPTIONAL) For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">server_request</code>, this MUST be a human-readable name of the submission type being requested as the client.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - (OPTIONAL) For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">server_request</code>, this MUST be a human-readable description providing the Client with more information about what this submission request item is.</li>
  <li><code class="language-plaintext highlighter-rouge">submitted_uri</code> - <em><a href="#url">URL</a></em> - (OPTIONAL) For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">client_submission</code>, this MAY be a URL that the Client is submitting as their response to the Server‚Äôs <code class="language-plaintext highlighter-rouge">server_request</code>, when the Server‚Äôs requested field is for a remote resource, such as an logo or binary file.</li>
  <li><code class="language-plaintext highlighter-rouge">previous_value</code> - <em>various</em> - (OPTIONAL) For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">field_changes</code>, this MUST be the value of the field that the is being requested to be changed from.</li>
  <li><code class="language-plaintext highlighter-rouge">new_value</code> - <em>various</em> - (OPTIONAL) For Client Updates with <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">field_changes</code>, this MUST be the value of the field that the is being requested to be changed to.</li>
</ul>

<h3 id="75-listing-client-updates-">7.5. Listing Client Updates <a id="clients-updates-list" href="#clients-updates-list" class="permalink">üîó</a></h3>

<p>Clients may request to list Client Update objects that they have access to by making an HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request, authenticated with a valid Bearer <code class="language-plaintext highlighter-rouge">access_token</code> scoped to the <code class="language-plaintext highlighter-rouge">client_admin</code> scope, to the <code class="language-plaintext highlighter-rouge">cds_client_updates_api</code> URL included in the <a href="#registration-response">Client Registration Response</a> or <a href="#client-format">Clients API</a>. The Client Update listing request responses are formatted as JSON objects and contain the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">outstanding</code> - <em>Array[<a href="#client-update-format">ClientUpdate</a>]</em> - (REQUIRED) A list of Client Updates where the <code class="language-plaintext highlighter-rouge">status</code> is <code class="language-plaintext highlighter-rouge">open</code> or <code class="language-plaintext highlighter-rouge">pending</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">outstanding_next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of outstanding Client Updates.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">outstanding_previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of outstanding Client Updates.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">unread</code> - <em>Array[<a href="#client-update-format">ClientUpdate</a>]</em> - (REQUIRED) A list of Client Updates where the <code class="language-plaintext highlighter-rouge">read</code> is <code class="language-plaintext highlighter-rouge">false</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">unread_next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of unread Client Updates.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">unread_previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of unread Client Updates.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">read</code> - <em>Array[<a href="#client-update-format">ClientUpdate</a>]</em> - (REQUIRED) A list of Client Updates where the <code class="language-plaintext highlighter-rouge">read</code> is <code class="language-plaintext highlighter-rouge">true</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">read_next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of read Client Updates.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">read_previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of read Client Updates.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Responses to <code class="language-plaintext highlighter-rouge">outstanding_next</code>, <code class="language-plaintext highlighter-rouge">outstanding_previous</code>, <code class="language-plaintext highlighter-rouge">unread_next</code>, <code class="language-plaintext highlighter-rouge">unread_previous</code>, <code class="language-plaintext highlighter-rouge">read_next</code>, or <code class="language-plaintext highlighter-rouge">read_previous</code> MUST be formatted the same as the initial Client Update listing, and MUST only include listings for the relevant next segment.
For example, if the Client requests a <code class="language-plaintext highlighter-rouge">unread_next</code>, the Server‚Äôs response MUST have <code class="language-plaintext highlighter-rouge">outstanding</code> and <code class="language-plaintext highlighter-rouge">read</code> lists be empty lists (<code class="language-plaintext highlighter-rouge">[]</code>).</p>

<p>Listings of Client Update objects MUST be ordered in reverse chronological order by <code class="language-plaintext highlighter-rouge">modified</code> timestamp, where the most recently updated relevant Client Update MUST be first in each listing.</p>

<h3 id="76-creating-client-updates-">7.6. Creating Client Updates <a id="clients-updates-create" href="#clients-updates-create" class="permalink">üîó</a></h3>

<p>Clients create new Client Updates by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">POST</code> request to the <code class="language-plaintext highlighter-rouge">cds_client_updates_api</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object MUST include the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">previous_uri</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">client_submission</code>, this value MUST be the Client Update <code class="language-plaintext highlighter-rouge">uri</code> that this Client Update is being submitted in response to (i.e. must have a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">server_request</code>).
If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">support_request</code> or <code class="language-plaintext highlighter-rouge">private_message</code>, if the Client is responding to a previous Client Update, this value MUST be the Client Update <code class="language-plaintext highlighter-rouge">uri</code> of that Client Update.
If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">support_request</code> or <code class="language-plaintext highlighter-rouge">private_message</code> that is not responding to another specific Client Update, this value MUST be <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">type</code> - <em><a href="#client-update-types">ClientUpdateType</a></em> - This value MUST be one of <code class="language-plaintext highlighter-rouge">private_message</code>, <code class="language-plaintext highlighter-rouge">support_request</code>, or <code class="language-plaintext highlighter-rouge">client_submission</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - <em><a href="#string">string</a></em> - If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">client_submission</code>, this value MUST be an empty string (<code class="language-plaintext highlighter-rouge">""</code>).
If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">support_request</code> or <code class="language-plaintext highlighter-rouge">private_message</code>, this value MUST be the subject line of the message.</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> - <em><a href="#string">string</a></em> - If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">client_submission</code>, this value MUST be an empty string (<code class="language-plaintext highlighter-rouge">""</code>).
If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">support_request</code> or <code class="language-plaintext highlighter-rouge">private_message</code>, this value MUST be the body of the message.</li>
  <li><code class="language-plaintext highlighter-rouge">updates_requested</code> - <em>Array[<a href="#client-update-request-format">ClientUpdateRequest</a>]</em> - If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">client_submission</code>, this value MUST be a list of <a href="#client-update-request-format">Client Update Request</a> objects with <code class="language-plaintext highlighter-rouge">field</code> values matching the <code class="language-plaintext highlighter-rouge">field</code> values in the corresponding <code class="language-plaintext highlighter-rouge">server_request</code> Client Update Request objects, and <code class="language-plaintext highlighter-rouge">description</code> or <code class="language-plaintext highlighter-rouge">submitted_uri</code> values being the Client‚Äôs submission response to the Server‚Äôs request for that <code class="language-plaintext highlighter-rouge">field</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">related_uri</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - If submitting a Client Update with a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">support_request</code>, this value MAY be a URL to the relevant API endpoint for the support request.
If there is no relevant API endpoint, the Client MUST set this value as <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Servers MUST reject requests with a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response when a Client submits an incomplete request or the submitted values are invalid.
For valid <code class="language-plaintext highlighter-rouge">POST</code> requests from Clients, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">201 Created</code> response with an updated JSON object of the complete current Client Update object.
When committing Client Updates created by Clients, Servers MUST populate the following fields in addition to the Client‚Äôs submitted fields:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">uri</code> - <em><a href="#url">URL</a></em> - The endpoint where the Client can retrieve the newly created Client Update object.</li>
  <li><code class="language-plaintext highlighter-rouge">read</code> - <em>boolean</em> - Always set to <code class="language-plaintext highlighter-rouge">true</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">creator</code> - <em><a href="#string">string</a></em> - Always set to the Client‚Äôs <code class="language-plaintext highlighter-rouge">client_id</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">created</code> - <em><a href="#datetime">datetime</a></em> - Always set to the Server‚Äôs timestamp for when the Client Update was created.</li>
  <li><code class="language-plaintext highlighter-rouge">modified</code> - <em><a href="#datetime">datetime</a></em> - Always the same as <code class="language-plaintext highlighter-rouge">created</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - <em><a href="#client-update-statuses">ClientUpdateStatus</a></em> - For <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">private_message</code> or <code class="language-plaintext highlighter-rouge">client_submission</code>, this value MUST be <code class="language-plaintext highlighter-rouge">complete</code>.
For <code class="language-plaintext highlighter-rouge">type</code> values of <code class="language-plaintext highlighter-rouge">support_request</code>, this value MUST be <code class="language-plaintext highlighter-rouge">pending</code>.</li>
</ul>

<p>When Clients submit Client Updates with <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">client_submission</code>, if the Client Update referenced in the <code class="language-plaintext highlighter-rouge">previous_uri</code> has a <code class="language-plaintext highlighter-rouge">status</code> of <code class="language-plaintext highlighter-rouge">open</code>, then the Server MUST update the <code class="language-plaintext highlighter-rouge">status</code> of that referenced Client Update to <code class="language-plaintext highlighter-rouge">pending</code>, which indicates that the Client has submitted a response for Server review.</p>

<h3 id="77-modifying-client-updates-">7.7. Modifying Client Updates <a id="clients-updates-modify" href="#clients-updates-modify" class="permalink">üîó</a></h3>

<p>Clients may modify fields in a Client Updates object by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">PATCH</code> request to the Client Update <code class="language-plaintext highlighter-rouge">uri</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object are the fields the Client intends to update with the submitted fields‚Äô values.
If a field is not included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, the Server MUST leave the field unmodified from its current value.</p>

<p>The following are fields that MAY be included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, and modification MUST be supported by Servers:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">read</code> - Servers MUST accept values of <code class="language-plaintext highlighter-rouge">true</code> and <code class="language-plaintext highlighter-rouge">false</code> from the Client.</li>
</ul>

<p>If a Client wishes to modify a previously submitted Client Update of type <code class="language-plaintext highlighter-rouge">client_submission</code> they created, the Client MUST <a href="#clients-updates-create">create a new Client Update</a> with the same <code class="language-plaintext highlighter-rouge">previous_uri</code> value as the Client Update the Client is wishing to supersede.
Severs MUST process newer Client Updates created by the Client as overriding the Client‚Äôs previous submission.</p>

<p>If a Client wishes to amend a previously created Client Update of type <code class="language-plaintext highlighter-rouge">private_message</code> or <code class="language-plaintext highlighter-rouge">support_request</code> they created, the Client MUST <a href="#clients-updates-create">create a new Client Update</a> with the <code class="language-plaintext highlighter-rouge">previous_uri</code> value set as the Client Update <code class="language-plaintext highlighter-rouge">uri</code> for which they are wanting to amend.
Severs MUST consider newer Client Updates created by the Client as amending the Client‚Äôs previous support request or message.</p>

<h2 id="8-scope-credentials-api-">8. Scope Credentials API <a id="scope-creds-api" href="#scope-creds-api" class="permalink">üîó</a></h2>

<p>To allow Clients to manage <code class="language-plaintext highlighter-rouge">client_secret</code> values used for authentication to APIs, this specification requires that Server implement a Scope Credentials API.
Servers MAY implement other means of managing Scope Credentials, such as a web interface, but they MUST also mirror any Scope Credentials managed by other means on this required Scope Credentials API.</p>

<p>The Scope Credentials API endpoints are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</p>

<h3 id="81-scope-credentials-object-format-">8.1. Scope Credentials Object Format <a id="scope-creds-format" href="#scope-creds-format" class="permalink">üîó</a></h3>

<p>Scope Credentials objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">credential_id</code> - <em><a href="#string">string</a></em> - (REQUIRED) The unique identifier for the Scope Credential on the Server‚Äôs system.</li>
  <li><code class="language-plaintext highlighter-rouge">uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where to retrieve, modify, or delete this specific Scope Credential object.</li>
  <li><code class="language-plaintext highlighter-rouge">client_id</code> - <em><a href="#string">string</a></em> - (REQUIRED) Which Client this Scope Credential belongs to.</li>
  <li><code class="language-plaintext highlighter-rouge">created</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Scope Credential was created.</li>
  <li><code class="language-plaintext highlighter-rouge">modified</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Scope Credential was last modified.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - <em><a href="#string">string</a></em> - (REQUIRED) The scopes for which this Scope Credential may obtain access.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc9396#section-7.1">OAuth AuthorizationDetail</a>]</em> - (REQUIRED) Any authorization details scopes that this Scope Credential may obtain access, in addition to this object‚Äôs <code class="language-plaintext highlighter-rouge">scope</code> value.
If no authorization details scopes are configured in addition to the <code class="language-plaintext highlighter-rouge">scope</code> string, this value is an empty array (<code class="language-plaintext highlighter-rouge">[]</code>).
If the <code class="language-plaintext highlighter-rouge">type</code> field of an authorization detail object in this array is the same as a value in the <code class="language-plaintext highlighter-rouge">scope</code> string, the authorization detail object replaces the scope with additional more refined access details for the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">client_secret</code> - <em><a href="#string">string</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) A sufficiently random value generated by the Server that can be used by the Client to authenticate themselves when obtaining an <code class="language-plaintext highlighter-rouge">access_token</code> from the Server‚Äôs OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-3.2">token endpoint</a>.
For Scope Credentials that have a <code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> value of <code class="language-plaintext highlighter-rouge">none</code>, this value MUST be <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">client_secret_expires_at</code> - <em><a href="#datetime">datetime</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) When the <code class="language-plaintext highlighter-rouge">client_secret</code> will expire.
If the <code class="language-plaintext highlighter-rouge">client_secret</code> is not currently set to expire, this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - <em><a href="#scope-creds-statuses">ScopeCredentialStatus</a></em> - (REQUIRED) The current status of accessibility for this Scope Credential.</li>
  <li><code class="language-plaintext highlighter-rouge">status_options</code> - <em>Array[<a href="#scope-creds-statuses">ScopeCredentialStatus</a>]</em> - (REQUIRED) What <code class="language-plaintext highlighter-rouge">status</code> values to which the Client MAY change the Scope Credential when <a href="#scope-creds-modify">modifying</a> it.
This list MUST always contain at least the values of <code class="language-plaintext highlighter-rouge">sandbox_only</code> and <code class="language-plaintext highlighter-rouge">disabled</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">response_types</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth ResponseType</a>]</em> - (REQUIRED) What type of OAuth <a href="https://www.rfc-editor.org/rfc/rfc7591#section-2"><code class="language-plaintext highlighter-rouge">response_types</code></a> are available for use with this Scope Credential.
Only a <code class="language-plaintext highlighter-rouge">response_type</code> value of <code class="language-plaintext highlighter-rouge">code</code> is supported by this specification.</li>
  <li><code class="language-plaintext highlighter-rouge">grant_types</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth GrantType</a>]</em> - (REQUIRED) What type of OAuth <a href="https://www.rfc-editor.org/rfc/rfc7591#section-2"><code class="language-plaintext highlighter-rouge">grant_types</code></a> are available for use with this Scope Credential.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> - <em><a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth TokenEndpointAuthMethod</a></em> - (REQUIRED) What type of OAuth <a href="https://www.rfc-editor.org/rfc/rfc7591#section-2"><code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code></a> MUST be used when requesting an <code class="language-plaintext highlighter-rouge">access_token</code> from the Server‚Äôs OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-3.2">token endpoint</a>.
This value MUST be <code class="language-plaintext highlighter-rouge">client_secret_basic</code> for which scopes the Server requires a non-public Client.
This value MAY be <code class="language-plaintext highlighter-rouge">none</code> when the Server allows the scope to be used by public Clients.</li>
  <li><code class="language-plaintext highlighter-rouge">redirect_uris</code> - <em>Array[<a href="#url">URL</a>]</em> - (REQUIRED) A list of URLs that the Client MAY use as <code class="language-plaintext highlighter-rouge">redirect_uri</code> parameter values in the Server‚Äôs OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">authorization endpoint</a>.
Servers MUST support public domain name URLs (e.g. ‚Äúhttps://example.com/redirect‚Äù), as well as internal development URLs (e.g. ‚Äúhttp://localhost:4000/redirect‚Äù) and IP addresses in the host of the URL (e.g. ‚Äúhttp://127.0.0.1:9999/redirect‚Äù).
Servers MUST support both <code class="language-plaintext highlighter-rouge">http</code> and <code class="language-plaintext highlighter-rouge">https</code> schemas in URLs.
Servers MUST also support the addition of parameters in the URL, and when redirected to, append the Server‚Äôs parameters (e.g. <code class="language-plaintext highlighter-rouge">code=...&amp;state=...</code>) properly to the Client‚Äôs <code class="language-plaintext highlighter-rouge">redirect_uri</code> even in cases where the Client‚Äôs <code class="language-plaintext highlighter-rouge">redirect_uri</code> already has additional parameters.
For example, if the Client‚Äôs <code class="language-plaintext highlighter-rouge">redirect_uri</code> is ‚Äúhttps://example.com/redirect?pageid=123‚Äù, the Server‚Äôs redirect would be ‚Äúhttps://example.com/redirect?pageid=123&amp;code=aaaaaaa&amp;state=bbbbbbb‚Äù and not ‚Äúhttps://example.com/redirect?pageid=123?code=aaaaaaa&amp;state=bbbbbbb‚Äù.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_endpoint</code> - <em><a href="#url">URL</a></em> - (OPTIONAL) A specific OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">authorization endpoint</a> that overrides the default Client <code class="language-plaintext highlighter-rouge">authorization_endpoint</code> for this specific Scope Credential.
This MAY be added by Servers who have different authorization interfaces for different sets of scopes.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint</code> - <em><a href="#url">URL</a></em> - (OPTIONAL) A specific OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-3.2">token endpoint</a> that overrides the default Client <code class="language-plaintext highlighter-rouge">token_endpoint</code> for this specific Scope Credential.
This MAY be added by Servers who have different token interfaces for different sets of scopes.</li>
</ul>

<h3 id="82-scope-credentials-statuses-">8.2. Scope Credentials Statuses <a id="scope-creds-statuses" href="#scope-creds-statuses" class="permalink">üîó</a></h3>

<p>Scope Credential object <code class="language-plaintext highlighter-rouge">status</code> values MUST be one of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">production_only</code> - The <code class="language-plaintext highlighter-rouge">scope</code>, <code class="language-plaintext highlighter-rouge">authorization_details</code>, and <code class="language-plaintext highlighter-rouge">client_secret</code> MAY be used by the Client to request access on the Server‚Äôs production systems.
For scopes that require user authorization (i.e. <code class="language-plaintext highlighter-rouge">response_type</code> values of <code class="language-plaintext highlighter-rouge">code</code>), this <code class="language-plaintext highlighter-rouge">status</code> indicates that the Client may request authorization from real users.</li>
  <li><code class="language-plaintext highlighter-rouge">production_and_sandbox</code> - The <code class="language-plaintext highlighter-rouge">scope</code>, <code class="language-plaintext highlighter-rouge">authorization_details</code>, and <code class="language-plaintext highlighter-rouge">client_secret</code> MAY be used by the Client to request access on the Server‚Äôs production or test environment systems.
For scopes that require user authorization (i.e. <code class="language-plaintext highlighter-rouge">response_type</code> values of <code class="language-plaintext highlighter-rouge">code</code>), this <code class="language-plaintext highlighter-rouge">status</code> indicates that the Client may request authorization from real or test users, as provided in the Server‚Äôs <code class="language-plaintext highlighter-rouge">cds_test_accounts</code> documentation.</li>
  <li><code class="language-plaintext highlighter-rouge">sandbox_only</code> - The <code class="language-plaintext highlighter-rouge">scope</code>, <code class="language-plaintext highlighter-rouge">authorization_details</code>, and <code class="language-plaintext highlighter-rouge">client_secret</code> MAY be used by the Client to request access on the Server‚Äôs test environment systems.
For scopes that require user authorization (i.e. <code class="language-plaintext highlighter-rouge">response_type</code> values of <code class="language-plaintext highlighter-rouge">code</code>), this <code class="language-plaintext highlighter-rouge">status</code> indicates that the Client may request authorization from fictional test users, as provided in the Server‚Äôs <code class="language-plaintext highlighter-rouge">cds_test_accounts</code> documentation.</li>
  <li><code class="language-plaintext highlighter-rouge">disabled</code> - The Scope Credential is disabled.</li>
</ul>

<h3 id="83-evaluating-authorization-request-scopes-">8.3. Evaluating Authorization Request Scopes <a id="auth-request-scope-evaluation" href="#auth-request-scope-evaluation" class="permalink">üîó</a></h3>

<p>When responding to an OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">authorization request</a>, Servers MUST evaluate the requested <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code> against the <code class="language-plaintext highlighter-rouge">scope</code> and <code class="language-plaintext highlighter-rouge">authorization_details</code> listed in all of the Client‚Äôs Scope Credentials objects.
If the authorization request‚Äôs <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code> is compatible with all or a subset of an individual Scope Credential‚Äôs <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code>, and the <code class="language-plaintext highlighter-rouge">status</code> of the Scope Credential is compatible with the type of authenticated user (<code class="language-plaintext highlighter-rouge">production_and_sandbox</code> for any test or real users, <code class="language-plaintext highlighter-rouge">sandbox_only</code> for test users, <code class="language-plaintext highlighter-rouge">production_only</code> for real users), and the <code class="language-plaintext highlighter-rouge">redirect_uri</code> parameter in the authorization request is listed in the Scope Credential.</p>

<p>If a Server finds that an authorization request is compatible with multiple Scope Credentials, the Server MUST accept the authorization request as valid.
When the user authorizes, the <code class="language-plaintext highlighter-rouge">code</code> parameter created by the Server and sent to the Client via the <code class="language-plaintext highlighter-rouge">redirect_uri</code> parameter MUST be able to be used to obtain an <code class="language-plaintext highlighter-rouge">access_token</code> via the token endpoint using any of the matching Scope Credentials‚Äô <code class="language-plaintext highlighter-rouge">client_secret</code> values.
If one of the compatible Scope Credentials <span style="background-color:yellow">TODO</span></p>

<h3 id="84-listing-scope-credentials-">8.4. Listing Scope Credentials <a id="scope-creds-list" href="#scope-creds-list" class="permalink">üîó</a></h3>

<p>Clients may request to list Scope Credential objects that they have access to by making an HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request, authenticated with a valid Bearer <code class="language-plaintext highlighter-rouge">access_token</code> scoped to the <code class="language-plaintext highlighter-rouge">client_admin</code> scope, to the <code class="language-plaintext highlighter-rouge">cds_scope_credentials_api</code> URL included in the <a href="#registration-response">Client Registration Response</a> or <a href="#client-format">Clients API</a>.
The Scope Credential listing request responses are formatted as JSON objects and contain the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">scope_credentials</code> - <em>Array[<a href="#scope-creds-format">ScopeCredential</a>]</em> - (REQUIRED) A list of Scope Credentials to which the requesting <code class="language-plaintext highlighter-rouge">access_token</code> is scoped to have access.
If no Scope Credentials are accessible, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
If more than 100 Scope Credentials are available to be listed, Servers MAY truncate the list and use the <code class="language-plaintext highlighter-rouge">next</code> value to link to the next segment of the list of Scope Credentials.</li>
  <li><code class="language-plaintext highlighter-rouge">next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of Scope Credentials.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of Scope Credentials.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Servers MUST support Clients adding any of the following URL parameters to the <code class="language-plaintext highlighter-rouge">GET</code> request, which will filter the list of Scope Credentials to be the intersection of results for each of the URL parameters filters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">statuses</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">status</code> values for which the Servers MUST filter the Scope Credentials.</li>
  <li><code class="language-plaintext highlighter-rouge">client_ids</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">client_id</code> values for which the Servers MUST filter the Scope Credentials.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_uris</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">cds_client_uris</code> values for which the Servers MUST filter the Scope Credentials.</li>
  <li><code class="language-plaintext highlighter-rouge">scopes</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">scope</code> values for which the Server MUST filter the Scope Credentials, where the included <code class="language-plaintext highlighter-rouge">scope</code> values are values within the Scope Credential <code class="language-plaintext highlighter-rouge">scope</code> (space separated) or as a <code class="language-plaintext highlighter-rouge">type</code> value in the <code class="language-plaintext highlighter-rouge">authorization_details</code> list.</li>
  <li><code class="language-plaintext highlighter-rouge">after</code> - A <a href="#datetime">datetime</a> for which the Server MUST filter Scope Credentials that were created after or on the datetime.</li>
  <li><code class="language-plaintext highlighter-rouge">before</code> - A <a href="#datetime">datetime</a> for which the Server MUST filter Scope Credentials that were created before or on the datetime.</li>
</ul>

<p>Listings of Scope Credential objects MUST be ordered in reverse chronological order by <code class="language-plaintext highlighter-rouge">modified</code> timestamp, where the most recently updated relevant Scope Credential MUST be first in each listing.</p>

<h3 id="85-retrieving-individual-scope-credentials-">8.5. Retrieving Individual Scope Credentials <a id="scope-creds-get" href="#scope-creds-get" class="permalink">üîó</a></h3>

<p>The URL to be used to send <code class="language-plaintext highlighter-rouge">GET</code> requests for retrieving individual Scope Credential objects MUST be the Scope Credential <code class="language-plaintext highlighter-rouge">uri</code> provided in the <a href="#scope-creds-format">Scope Credential object</a>.</p>

<h3 id="86-creating-scope-credentials-">8.6. Creating Scope Credentials <a id="scope-creds-create" href="#scope-creds-create" class="permalink">üîó</a></h3>

<p>Clients create new Scope Credentials by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">POST</code> request to the <code class="language-plaintext highlighter-rouge">cds_scope_credentials_api</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object MUST include the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - <em><a href="#string">string</a></em> - This value is a space-separated list of scopes for which the new Scope Credentials is requesting to be provisioned.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc9396#section-7.1">OAuth AuthorizationDetail</a>]</em> - This value is a list of additional authorization detail objects that specify more granular access than simple scope strings.
If the <code class="language-plaintext highlighter-rouge">type</code> field of an authorization detail object in this list is the same as a value in the <code class="language-plaintext highlighter-rouge">scope</code> string, the authorization detail object replaces the scope with additional more refined access details for the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">redirect_uris</code> - <em>Array[<a href="#url">URL</a>]</em> - A list of URLs that the Client MAY use as <code class="language-plaintext highlighter-rouge">redirect_uri</code> parameter values in the Server‚Äôs OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">authorization endpoint</a> when requesting user authorization for the scopes (<code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code>). If the scopes do not require user authorization (e.g. a <code class="language-plaintext highlighter-rouge">grant_type</code> value of<code class="language-plaintext highlighter-rouge">client_credentials</code>), this list may be an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
For scopes that require user authorization (e.g. a <code class="language-plaintext highlighter-rouge">response_type</code> value of <code class="language-plaintext highlighter-rouge">code</code>), this list may also be empty (<code class="language-plaintext highlighter-rouge">[]</code>) and updated by the Client later using the <a href="#scope-creds-modify">Scope Credentials modification API</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code> - <em><a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth TokenEndpointAuthMethod</a></em> - Either <code class="language-plaintext highlighter-rouge">none</code> or <code class="language-plaintext highlighter-rouge">client_secret_basic</code>, depending on if the Client is adding a Scope Credential for a public or non-public use case, respectively.
Server MUST only allow <code class="language-plaintext highlighter-rouge">none</code> to be valid in cases where the requested scopes require user authorization and authorization requests are permitted by public Clients.</li>
</ul>

<p>Servers MUST reject requests with a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response when a Client submits an incomplete request or the submitted values are invalid.
Scopes for which user authorization is required (i.e. <code class="language-plaintext highlighter-rouge">response_type</code> value of <code class="language-plaintext highlighter-rouge">code</code>) MUST NOT be included with scopes that do not require user authorization (i.e. <code class="language-plaintext highlighter-rouge">grant_type</code> value of <code class="language-plaintext highlighter-rouge">client_credentials</code>), and if submitted together, MUST be rejected by the Server as invalid.
For valid <code class="language-plaintext highlighter-rouge">POST</code> requests from Clients, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">201 Created</code> response with an updated JSON object of the complete current Scope Credential object.
When committing Scope Credentials created by Clients, Servers MUST populate the following fields in addition to the Client‚Äôs submitted fields:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">credential_id</code> - <em><a href="#string">string</a></em> - The unique identifier for the Scope Credential on the Server‚Äôs system.</li>
  <li><code class="language-plaintext highlighter-rouge">uri</code> - <em><a href="#url">URL</a></em> - The endpoint where the Client can retrieve the newly created Scope Credential object.</li>
  <li><code class="language-plaintext highlighter-rouge">created</code> - <em><a href="#datetime">datetime</a></em> - Always set to the Server‚Äôs timestamp for when the Scope Credential was created.</li>
  <li><code class="language-plaintext highlighter-rouge">modified</code> - <em><a href="#datetime">datetime</a></em> - Always the same as <code class="language-plaintext highlighter-rouge">created</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - <em><a href="#scope-creds-statuses">ScopeCredentialStatus</a></em> - Always set to <code class="language-plaintext highlighter-rouge">sandbox_only</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">status_options</code> - <em>Array[<a href="#scope-creds-statuses">ScopeCredentialStatus</a>]</em> - Always a list containing at least two values: <code class="language-plaintext highlighter-rouge">sandbox_only</code> and <code class="language-plaintext highlighter-rouge">disabled</code>.
If the Client has already previously been approved for production for the same scopes, the Server MUST include any of <code class="language-plaintext highlighter-rouge">production_only</code> or <code class="language-plaintext highlighter-rouge">production_and_sandbox</code> in the list.
If the Server can synchronously approve the Scope Credential for production mode, the Server MAY also include any of <code class="language-plaintext highlighter-rouge">production_only</code> or <code class="language-plaintext highlighter-rouge">production_and_sandbox</code> values in the list.
If the Server will be reviewing the Scope Credential creation for production approval, Servers MUST also create a <a href="#client-updates-api">Client Update entry</a> of type <code class="language-plaintext highlighter-rouge">field_changes</code> with a <a href="#client-update-request-format">Client Update Request</a> entry with a <code class="language-plaintext highlighter-rouge">field</code> value of <code class="language-plaintext highlighter-rouge">status_options</code>, indicating that the Client has requested the Server to review production access approval for the new Scope Credential.</li>
  <li><code class="language-plaintext highlighter-rouge">response_types</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth ResponseType</a>]</em> - For scopes for which user authorization is required, this is always a single-entry list with the value <code class="language-plaintext highlighter-rouge">code</code> in the list.
For scopes for which user authorization is not required, this is always an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">grant_types</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc7591#section-2">OAuth GrantType</a>]</em> - For scopes for which user authorization is required, this is always a two-entry list with the values <code class="language-plaintext highlighter-rouge">authorization_code</code> and <code class="language-plaintext highlighter-rouge">refresh_token</code>.
For scopes for which user authorization is not required, this is always a single-entry list with the value <code class="language-plaintext highlighter-rouge">client_credentials</code> in the list.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_endpoint</code> - <em><a href="#url">URL</a></em> - (OPTIONAL) If different from the Client object‚Äôs <code class="language-plaintext highlighter-rouge">authorization_endpoint</code> value.</li>
  <li><code class="language-plaintext highlighter-rouge">token_endpoint</code> - <em><a href="#url">URL</a></em> - (OPTIONAL) If different from the Client object‚Äôs <code class="language-plaintext highlighter-rouge">token_endpoint</code> value.</li>
</ul>

<h3 id="87-modifying-scope-credentials-">8.7. Modifying Scope Credentials <a id="scope-creds-modify" href="#scope-creds-modify" class="permalink">üîó</a></h3>

<p>Clients may modify fields in the Scope Credentials API by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">PATCH</code> request to the Scope Credential <code class="language-plaintext highlighter-rouge">uri</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object are the fields the Client intends to update with the submitted fields‚Äô values.
If a field is not included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, the Server MUST leave the field unmodified from its current value.</p>

<p>The following are fields that MAY be included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, and modification MUST be supported by Servers:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">status</code> - Servers MUST only accept a value list in the object‚Äôs <code class="language-plaintext highlighter-rouge">status_options</code> from the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">status_options</code> - This value is a list of <a href="#scope-creds-statuses">Scope Credential Status</a> values for which the Client is requesting approval.
This list MUST always contain <code class="language-plaintext highlighter-rouge">disabled</code> and <code class="language-plaintext highlighter-rouge">sandbox_only</code>, and if these values are not submitted by the Client, the Server MUST automatically add them to the Client-submitted list.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - <em><a href="#string">string</a></em> - This value is a space-separated list of scopes for which the new Scope Credentials is requesting to be provisioned.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc9396#section-7.1">OAuth AuthorizationDetail</a>]</em> - This value is a list of additional authorization detail objects that specify more granular access than simple scope strings.
If the <code class="language-plaintext highlighter-rouge">type</code> field of an authorization detail object in this list is the same as a value in the <code class="language-plaintext highlighter-rouge">scope</code> string, the authorization detail object replaces the scope with additional more refined access details for the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">redirect_uris</code> - <em>Array[<a href="#url">URL</a>]</em> - A list of URLs that the Client MAY use as <code class="language-plaintext highlighter-rouge">redirect_uri</code> parameter values in the Server‚Äôs OAuth <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1">authorization endpoint</a> when requesting user authorization for the scopes (<code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code>).
If the scopes do not require user authorization (e.g. a <code class="language-plaintext highlighter-rouge">grant_type</code> value of<code class="language-plaintext highlighter-rouge">client_credentials</code>), this list may be an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
For scopes that require user authorization (e.g. a <code class="language-plaintext highlighter-rouge">response_type</code> value of <code class="language-plaintext highlighter-rouge">code</code>), this list may also be empty (<code class="language-plaintext highlighter-rouge">[]</code>) and updated by the Client later using the <a href="#scope-creds-modify">Scope Credentials modification API</a>.</li>
</ul>

<p>Servers MUST reject requests with a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response when fields are submitted that are not able to be modified by the Client or the submitted values are invalid.
If a Server needs to asynchronously review and approve changes to any submitted Scope Credential object fields that have been submitted by the Client and are different from the current values, for valid update requests the Server MUST respond with a <code class="language-plaintext highlighter-rouge">202 Accepted</code> response, which indicates that the submission was accepted but not fully saved as completed yet.
Any fields that have not been synchronously updated as part of the request and response MUST remain in the response as their previous values, and the Server MUST add one or more entries to the <a href="#clients-updates-list">listed Client Updates</a> for the modified fields that need to be asynchronously reviewed and approved.
Clients MAY then use the <a href="#client-updates-api">Client Updates API</a> to track the asynchronous review of the modification request.
If all submitted fields have been synchronously updated as part of the response, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">200 OK</code> response.</p>

<p>If a Client updates the <code class="language-plaintext highlighter-rouge">status</code> of a Scope Credential to <code class="language-plaintext highlighter-rouge">disabled</code>, the Server MUST assume the Scope Credential is compromised and synchronously disable the Scope Credential‚Äôs <code class="language-plaintext highlighter-rouge">client_secret</code> from being used on the token endpoint and revoke any <code class="language-plaintext highlighter-rouge">access_token</code> or <code class="language-plaintext highlighter-rouge">refresh_token</code> values issued by the token endpoint as a result of using the now-disabled Scope Credential.</p>

<h2 id="9-grants-api-">9. Grants API <a id="grants-api" href="#grants-api" class="permalink">üîó</a></h2>

<p>This specification requires Servers provide an API allowing Clients to view and edit OAuth user authorizations and client credentials grants (‚ÄúGrants‚Äù) related to their registration.
These APIs are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</p>

<h3 id="91-grant-object-format-">9.1. Grant Object Format <a id="grant-format" href="#grant-format" class="permalink">üîó</a></h3>

<p>Grant objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">grant_id</code> - <em><a href="#string">string</a></em> - (REQUIRED) The unique identifier for the Grant on the Server‚Äôs system.</li>
  <li><code class="language-plaintext highlighter-rouge">uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) A link to this specific Grant that can be used to <a href="#grants-get">retrieve</a> or <a href="#grants-modify">modify</a> the individual Grant.</li>
  <li><code class="language-plaintext highlighter-rouge">replacing</code> - <em>Array[<a href="#url">URL</a>]</em> - (REQUIRED) If this Grant is superseding another Grant, this is the list of Grant <code class="language-plaintext highlighter-rouge">uri</code> values of the superseded Grants.
If this grant is not superseding any other Grants, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">replaced_by</code> - <em>Array[<a href="#url">URL</a>]</em> - (REQUIRED) If this Grant has been superseded by other Grants, this is the list of Grant <code class="language-plaintext highlighter-rouge">uri</code> values of the superseding Grants.
If no other Grants have superseded this Grant, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">parent</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) If this Grant represents an individual sub-authorization that is part of another Grant that required multiple authorizations, this is where to find the parent Grant.
If this Grant is not a sub-authorization, this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">children</code> - <em>Array[<a href="#url">URL</a>]</em> - (REQUIRED) If this Grant represents a parent Grant that has multiple sub-authorizations underneath it, this is a list of Grant <code class="language-plaintext highlighter-rouge">uri</code> values for where to find the sub-authorizations.
If this Grant does not have any sub-authorizations, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">created</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Grant was created.</li>
  <li><code class="language-plaintext highlighter-rouge">modified</code> - <em><a href="#datetime">datetime</a></em> - (REQUIRED) When the Grant was most recently modified.
If the Grant has not been modified since creation, this is the same value as <code class="language-plaintext highlighter-rouge">created</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">not_before</code> - <em><a href="#datetime">datetime</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) When a Grant that is for future access, Grant‚Äôs <code class="language-plaintext highlighter-rouge">status</code> will be switched from <code class="language-plaintext highlighter-rouge">future</code> to another value.
If the Grant is not for future access and access is available immediately upon creation, this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">not_after</code> - <em><a href="#datetime">datetime</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) When a Grant has access that will expire in the future, this value indicates when the Grant‚Äôs <code class="language-plaintext highlighter-rouge">status</code> will be switched to <code class="language-plaintext highlighter-rouge">expired</code>.
If the Grant does not expire, this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">eta</code> - <em><a href="#datetime">datetime</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) When a Grant has a <code class="language-plaintext highlighter-rouge">status</code> with the value <code class="language-plaintext highlighter-rouge">pending</code>, this value indicates an estimated time for when the status is expected to be switched to another value.
If the Grant‚Äôs <code class="language-plaintext highlighter-rouge">status</code> is not <code class="language-plaintext highlighter-rouge">pending</code> this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">expires</code> - <em><a href="#datetime">datetime</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - (REQUIRED) When the Grant will expire and access will be removed by the Server.
If the Grant is to continue indefinitely, this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - <em><a href="#grant-status">GrantStatus</a></em> - (REQUIRED) The current <a href="#grant-status">Grant Status</a> of the Grant.</li>
  <li><code class="language-plaintext highlighter-rouge">client_id</code> - <em><a href="#string">string</a></em> - (REQUIRED) Which Client for which this Grant is issued.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_uri</code> - <em><a href="#url">URL</a></em> - (REQUIRED) Where to retrieve using the <a href="#clients-get">Clients API</a> the Client for which the Grant is issued.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - <em><a href="#string">string</a></em> - (REQUIRED) The scopes for which this Grant has issued access.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc9396#section-7.1">OAuth AuthorizationDetail</a>]</em> - (REQUIRED) Any authorization details scopes that are granted in addition to this object‚Äôs <code class="language-plaintext highlighter-rouge">scope</code> value.
If no authorization details scopes are configured in addition to the <code class="language-plaintext highlighter-rouge">scope</code> string, this value is an empty array (<code class="language-plaintext highlighter-rouge">[]</code>).
If the <code class="language-plaintext highlighter-rouge">type</code> field of an authorization detail object in this array is the same as a value in the <code class="language-plaintext highlighter-rouge">scope</code> string, the authorization detail object replaces the scope with additional more refined access details for the scope.</li>
  <li><code class="language-plaintext highlighter-rouge">receipt_confirmations</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) For Grants with scopes that can be obtained via user authorization (<code class="language-plaintext highlighter-rouge">grant_types</code> contains <code class="language-plaintext highlighter-rouge">authorization_code</code>), this is a list of receipt confirmation codes that were provided to the end users who authorized the access.
If no receipt was provided or the Grant did not get issued via <code class="language-plaintext highlighter-rouge">authorization_code</code> then this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">enabled_scope</code> - <em><a href="#string">string</a></em> - For Grants where access has been partially granted, but some access is still disabled, this value is the <code class="language-plaintext highlighter-rouge">scope</code> that has been enabled by the server.
For Grants where access has been fully granted, this value is the same as the <code class="language-plaintext highlighter-rouge">scope</code> value.
For Grants that have had their access removed (e.g. <code class="language-plaintext highlighter-rouge">disabled</code>), this value is an empty string (<code class="language-plaintext highlighter-rouge">""</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> - <em>Array[<a href="https://www.rfc-editor.org/rfc/rfc9396#section-7.1">OAuth AuthorizationDetail</a>]</em> - For Grants where access has been partially granted, but some access is still disabled, this value is the <code class="language-plaintext highlighter-rouge">authorization_details</code> that has been enabled by the server.
For Grants where access has been fully granted, this value is the same as the <code class="language-plaintext highlighter-rouge">authorization_details</code> value.
For Grants that have had their access removed (e.g. <code class="language-plaintext highlighter-rouge">disabled</code>), this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">sub_authorization_scopes</code> - <em>Array[<a href="#string">string</a>]</em> - (REQUIRED) For Grants that require sub-authorizations where users must provide additional authorization to enable access, this is the outstanding list of <code class="language-plaintext highlighter-rouge">scope</code> values that have yet to be authorized individually by users.</li>
</ul>

<h3 id="92-grant-statuses-">9.2. Grant Statuses <a id="grant-statuses" href="#grant-statuses" class="permalink">üîó</a></h3>

<p>Grants object <code class="language-plaintext highlighter-rouge">status</code> values MUST be one of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">active</code> - The Grant is active and access for the features and data specified in the <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code> is currently enabled.
For Grants that provide access to data APIs that are being regularly updated, this status also indicates that the Server is currently on schedule to provide the expected ongoing data updates.</li>
  <li><code class="language-plaintext highlighter-rouge">future</code> - The Grant will be made in the future, and the Client should check the <code class="language-plaintext highlighter-rouge">not_before</code> value for when the Grant will have its status switched to <code class="language-plaintext highlighter-rouge">active</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">pending</code> - The Grant has been create and is valid, but the Server is still processing or reviewing the Grant and the status will be changed to another status at approximately the time provided in the Grant‚Äôs <code class="language-plaintext highlighter-rouge">eta</code> value.
While a Grant‚Äôs status is <code class="language-plaintext highlighter-rouge">pending</code>, Servers MUST provide access to the granted scope‚Äôs features or data as the Server processes and the features or data becomes available.</li>
  <li><code class="language-plaintext highlighter-rouge">partial</code> - The Grant was submitted originally with the <code class="language-plaintext highlighter-rouge">scope</code> and <code class="language-plaintext highlighter-rouge">authorization_details</code> values, but the Server has limited the Client‚Äôs access a subset of the Grant‚Äôs <code class="language-plaintext highlighter-rouge">scope</code>.
The enabled access is listed in the <code class="language-plaintext highlighter-rouge">enabled_scope</code> and <code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> values.</li>
  <li><code class="language-plaintext highlighter-rouge">needs_authorization</code> - The Grant has been created, but access is limited to the <code class="language-plaintext highlighter-rouge">enabled_scope</code> and <code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> until a user authorizes the listed <code class="language-plaintext highlighter-rouge">scope</code> and <code class="language-plaintext highlighter-rouge">authorization_details</code> values using an authorization URL with a <code class="language-plaintext highlighter-rouge">cds_grant_id</code> parameter of this <code class="language-plaintext highlighter-rouge">grant_id</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">needs_sub_authorizations</code> - The Grant has been created, but access is limited to the <code class="language-plaintext highlighter-rouge">enabled_scope</code> and <code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> until user sub-authorizations, listed in the <code class="language-plaintext highlighter-rouge">sub_authorization_scopes</code> value, are granted using an authorization URL with a <code class="language-plaintext highlighter-rouge">cds_parent_id</code> parameter of this <code class="language-plaintext highlighter-rouge">grant_id</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">disabled</code> - The Grant has been indefinitely disabled by the Server, and the Client SHOULD NOT expect the Grant‚Äôs status to be updated in the future.</li>
  <li><code class="language-plaintext highlighter-rouge">suspended</code> - The Grant has been temporarily disabled by the Server or user who authorized access, and the Client SHOULD expect the Grant‚Äôs status to be updated in the future.</li>
  <li><code class="language-plaintext highlighter-rouge">revoked</code> - For Grants with scopes that can be obtained via user authorization (<code class="language-plaintext highlighter-rouge">grant_types</code> contains <code class="language-plaintext highlighter-rouge">authorization_code</code>), this status means the user has revoked access.</li>
  <li><code class="language-plaintext highlighter-rouge">closed</code> - The Grant has been revoked by the Client via the <a href="#grants-modify">Modifying Grants</a> API.</li>
  <li><code class="language-plaintext highlighter-rouge">expired</code> - The Grant has expired and access has been removed.
The Grant‚Äôs <code class="language-plaintext highlighter-rouge">not_after</code> value indicates when the Grant‚Äôs access was removed and the Grant is considered expired.</li>
  <li><code class="language-plaintext highlighter-rouge">delayed</code> - For Grants that provide access to data APIs that are being regularly updated, this status indicates that the data being provided is behind schedule and will be updated when the Server resolves its internal delay issues.</li>
  <li><code class="language-plaintext highlighter-rouge">stopped</code> - For Grants that provide access to data APIs that are being regularly updated, this status indicates that the data being provided has stopped being updated either by the Server or the user who originally authorized the access.
Access to existing data is still available, but the Client should not expect updates to the data being provided.</li>
  <li><code class="language-plaintext highlighter-rouge">errored</code> - The Server has encountered an internal error for this Grant, and Client access cannot be confirmed by the Server.</li>
</ul>

<p>Grant <code class="language-plaintext highlighter-rouge">status</code> values of <code class="language-plaintext highlighter-rouge">future</code>, <code class="language-plaintext highlighter-rouge">disabled</code>, <code class="language-plaintext highlighter-rouge">suspended</code>, <code class="language-plaintext highlighter-rouge">revoked</code>, <code class="language-plaintext highlighter-rouge">closed</code>, and <code class="language-plaintext highlighter-rouge">expired</code> indicate that access to all features and data that were accessible via this Grant are no longer accessible.</p>

<h3 id="93-listing-grants-">9.3. Listing Grants <a id="grants-list" href="#grants-list" class="permalink">üîó</a></h3>

<p>Clients may request to list Grant objects that they have access to by making an HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request, authenticated with a valid Bearer <code class="language-plaintext highlighter-rouge">access_token</code> scoped to the <code class="language-plaintext highlighter-rouge">client_admin</code> scope, to the <code class="language-plaintext highlighter-rouge">cds_grants_api</code> URL included in the <a href="#registration-response">Client Registration Response</a> or <a href="#client-format">Clients API</a>.
The Grant listing request responses are formatted as JSON objects and contain the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">grants</code> - <em>Array[<a href="#grant-format">Grant</a>]</em> - (REQUIRED) A list of Grants to which the requesting <code class="language-plaintext highlighter-rouge">access_token</code> is scoped to have access.
If no Grants are accessible, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
If more than 100 Grants are available to be listed, Servers MAY truncate the list and use the <code class="language-plaintext highlighter-rouge">next</code> value to link to the next segment of the list of Grants.</li>
  <li><code class="language-plaintext highlighter-rouge">next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of Grants.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of Grants.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Servers MUST support Clients adding any of the following URL parameters to the <code class="language-plaintext highlighter-rouge">GET</code> request, which will filter the list of Grants to be the intersection of results for each of the URL parameters filters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">statuses</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">status</code> values for which the Servers MUST filter the Grants.</li>
  <li><code class="language-plaintext highlighter-rouge">client_ids</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">client_id</code> values for which the Servers MUST filter the Grants.</li>
  <li><code class="language-plaintext highlighter-rouge">cds_client_uris</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">cds_client_uri</code> values for which the Servers MUST filter the Grants.</li>
  <li><code class="language-plaintext highlighter-rouge">scopes</code> - A space-separated list of <code class="language-plaintext highlighter-rouge">scope</code> values for which the Server MUST filter the Grants, where the included <code class="language-plaintext highlighter-rouge">scope</code> values are values within the Grant <code class="language-plaintext highlighter-rouge">scope</code> (space separated) or as a <code class="language-plaintext highlighter-rouge">type</code> value in the <code class="language-plaintext highlighter-rouge">authorization_details</code> list.</li>
  <li><code class="language-plaintext highlighter-rouge">receipt_confirmations</code> - A space-separated list of receipt confirmation codes for which the Server MUST filter the Grants.</li>
  <li><code class="language-plaintext highlighter-rouge">after</code> - A <a href="#datetime">datetime</a> for which the Server MUST filter Grants that were created after or on the datetime.</li>
  <li><code class="language-plaintext highlighter-rouge">before</code> - A <a href="#datetime">datetime</a> for which the Server MUST filter Grants that were created before or on the datetime.</li>
</ul>

<p>Listings of Grant objects MUST be ordered in reverse chronological order by <code class="language-plaintext highlighter-rouge">modified</code> timestamp, where the most recently updated relevant Grant MUST be first in each listing.</p>

<h3 id="94-retrieving-individual-grants-">9.4. Retrieving Individual Grants <a id="grants-get" href="#grants-get" class="permalink">üîó</a></h3>

<p>The URL to be used to send <code class="language-plaintext highlighter-rouge">GET</code> requests for retrieving individual Grant objects MUST be the Grant <code class="language-plaintext highlighter-rouge">uri</code> provided in the <a href="#grant-format">Grant object</a>.</p>

<h3 id="95-modifying-grants-">9.5. Modifying Grants <a id="grants-modify" href="#grants-modify" class="permalink">üîó</a></h3>

<p>Clients may modify fields in the Grants API by sending an authenticated HTTPS <code class="language-plaintext highlighter-rouge">PATCH</code> request to the Grant <code class="language-plaintext highlighter-rouge">uri</code> endpoint with the body of the request formatted a JSON object.
The fields included in JSON object are the fields the Client intends to update with the submitted fields‚Äô values.
If a field is not included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request, the Server MUST leave the field unmodified from its current value.</p>

<p>The following are fields that MAY be included in the <code class="language-plaintext highlighter-rouge">PATCH</code> request body, and modification MUST be supported by Servers:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">status</code> - Servers MUST only accept a value of <code class="language-plaintext highlighter-rouge">closed</code> from the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - Servers MUST evaluate the updated scope for whether another user authorization is required.
Servers MUST not require another user authorization if the updated scope is a reduction in scope of access (e.g. removal of a scope value from the scope string).
If a new user authorization or sub-authorizations are required, the Server MUST update the <code class="language-plaintext highlighter-rouge">status</code> to one of <code class="language-plaintext highlighter-rouge">needs_authorization</code> or <code class="language-plaintext highlighter-rouge">needs_sub_authorizations</code> and update the <code class="language-plaintext highlighter-rouge">enabled_scope</code> to be the value of the current scope for which the Client is allowed access.</li>
  <li><code class="language-plaintext highlighter-rouge">authorization_details</code> - Servers MUST evaluate the updated authorization details for whether another user authorization is required.
Servers MUST not require another user authorization if the updated scope is a reduction in scope of access (e.g. removal of a scope value from the scope string).
If a new user authorization or sub-authorizations are required, the Server MUST update the <code class="language-plaintext highlighter-rouge">status</code> to one of <code class="language-plaintext highlighter-rouge">needs_authorization</code> or <code class="language-plaintext highlighter-rouge">needs_sub_authorizations</code> and update the <code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> to be the value of the current authorization details for which the Client is allowed access.</li>
</ul>

<p>Servers MUST reject requests with a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response when fields are submitted that are not able to be modified by the Client or the submitted values are invalid.
For valid <code class="language-plaintext highlighter-rouge">PATCH</code> requests from Clients, Servers MUST respond with a <code class="language-plaintext highlighter-rouge">200 OK</code> response with an updated JSON object of the complete current Grant object.</p>

<p>If a Server needs to asynchronously review and approve changes to any submitted Grant object fields that have been submitted by the Client and are different from the current values, for valid modification requests the Server MUST update the Grant‚Äôs <code class="language-plaintext highlighter-rouge">status</code> to <code class="language-plaintext highlighter-rouge">pending</code> in the response.
Additionally, if the <code class="language-plaintext highlighter-rouge">scope</code> or <code class="language-plaintext highlighter-rouge">authorization_details</code> has been updated, the Server MUST update the <code class="language-plaintext highlighter-rouge">enabled_scope</code> and <code class="language-plaintext highlighter-rouge">enabled_authorization_details</code> to reflect for what the Client currently has access while the Grant is pending.</p>

<h2 id="10-directory-api-">10. Directory API <a id="directory-api" href="#directory-api" class="permalink">üîó</a></h2>

<p>Servers MUST provide both an authenticated API-based directory <a href="#directory-list">list of Clients</a>, as well as <a href="#public-directory">publicly accessible web directory</a> interface of Clients who have been configured to be listed.</p>

<p>The Directory APIs are authenticated using a Bearer <code class="language-plaintext highlighter-rouge">access_token</code> obtained by the Client using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.4"><code class="language-plaintext highlighter-rouge">client_credentials</code> grant</a> process, where the <code class="language-plaintext highlighter-rouge">client_id</code> used is for a Client that includes the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.
However, the <a href="#public-directory">Publicly Accessible Web Directory</a> not authenticated, as it is intended to be publicly accessible to browser users.</p>

<h3 id="101-directory-entry-object-format-">10.1. Directory Entry Object Format <a id="directory-entry-format" href="#directory-entry-format" class="permalink">üîó</a></h3>

<p>Directory Entry objects are formatted as JSON objects and contain the following named values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">client_id</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">client_name</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">client_uri</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">tos_uri</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">policy_uri</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">logo_uri</code> - From the <a href="#client-format">Client object</a></li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - From the <a href="#client-format">Client object</a>, containing the list of scopes approved for production use, and NOT containing the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_visibility</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_uri</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_description</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_uri</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_style</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_name</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_email</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_phone</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_website</code> - From the <a href="#client-settings-format">Client Settings object</a></li>
</ul>

<h3 id="102-listing-directory-entries-">10.2. Listing Directory Entries <a id="directory-list" href="#directory-list" class="permalink">üîó</a></h3>

<p>Clients may request to list Directory Entry objects that they have access to by making an HTTPS <code class="language-plaintext highlighter-rouge">GET</code> request, authenticated with a valid Bearer <code class="language-plaintext highlighter-rouge">access_token</code> scoped to the <code class="language-plaintext highlighter-rouge">client_admin</code> scope, to the <code class="language-plaintext highlighter-rouge">cds_directory_api</code> URL included in the <a href="#registration-response">Client Registration Response</a> or <a href="#client-format">Client object</a>.
The Client listing request responses are formatted as JSON objects and contain the following named values.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">entries</code> - <em>Array[<a href="#directory-entry-format">DirectoryEntry</a>]</em> - (REQUIRED) A list of Directory Entry objects for Clients who have set their <code class="language-plaintext highlighter-rouge">profile_visibility</code> to <code class="language-plaintext highlighter-rouge">listed</code>.
If no Clients are listed, this value is an empty list (<code class="language-plaintext highlighter-rouge">[]</code>).
If more than 100 Directory Entry objects are available to be listed, Servers MAY truncate the list and use the <code class="language-plaintext highlighter-rouge">next</code> value to link to the next segment of the list of Directory Entry objects.</li>
  <li><code class="language-plaintext highlighter-rouge">next</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the next segment of the list of Directory Entry objects.
If no next segment exists (i.e. the requester is at the end of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">previous</code> - <em><a href="#url">URL</a> or <code class="language-plaintext highlighter-rouge">null</code></em> - Where to request the previous segment of the list of Directory Entry objects.
If no previous segment exists (i.e. the requester is at the front of the list), this value is <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<h3 id="103-publicly-accessible-web-directory-">10.3. Publicly Accessible Web Directory <a id="public-directory" href="#public-directory" class="permalink">üîó</a></h3>

<p>Additionally, Servers MUST provide a publicly accessible directory web interface that allows users to browse and view the Client profile entries that are listed in the Directory API.
Servers MUST NOT require authentication for users to browse the directory.
Server MUST include searching capabilities in the web interface that allows users to search for Clients by name, description, and website.
Servers MUST also include filtering capabilities in the web interface that allows users to filter the list of Clients by scope.
Servers MUST also enable linking directly to a Client profile entry as defined by the <a href="#client-settings-format">Client Settings <code class="language-plaintext highlighter-rouge">profile_uri</code></a>.
Servers MUST design the publicly accessible directory to be compatible for desktop, mobile, and accessibility-focused browsers and tools, such as vision impaired screen readers.
Servers MAY include other features and functionality in addition to these requirements for the publicly accessible directory.</p>

<p>For Client profile entries, Servers MUST render the Client profile entry with at least the following contents:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">client_name</code> - From the <a href="#client-format">Client object</a>, as the name of the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">client_uri</code> - From the <a href="#client-format">Client object</a>, as a link to the Client‚Äôs website.</li>
  <li><code class="language-plaintext highlighter-rouge">tos_uri</code> - From the <a href="#client-format">Client object</a>, as a link to the Client‚Äôs terms of service.</li>
  <li><code class="language-plaintext highlighter-rouge">policy_uri</code> - From the <a href="#client-format">Client object</a>, as a link to the Client‚Äôs privacy policy.</li>
  <li><code class="language-plaintext highlighter-rouge">logo_uri</code> - From the <a href="#client-format">Client object</a>, as an image and embedded in the rendered Client profile.
Servers MAY fetch and cache logos set by Clients when they are configured as part of the <a href="#registration-request">Client Registration request</a> or when a Client modifies their registration on the <a href="#clients-modify">Clients API</a>.
If a Client sets this value to <code class="language-plaintext highlighter-rouge">null</code>, then the Server MUST render the logo as a placeholder image, such as an image with the words ‚ÄúNo Logo Provided‚Äù.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - From the <a href="#client-format">Client object</a>, as a list of scopes for which the Client is approved for production use, except for the <code class="language-plaintext highlighter-rouge">client_admin</code> scope.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_description</code> - From the <a href="#client-settings-format">Client Settings object</a>, as a block of text as a description of the Client.
Servers MUST NOT render URLs, phone numbers, emails, and other text that may be auto-detected as a link as links, and instead MUST render the description text as text.
Servers MUST render line breaks in the profile entry as submitted by the Client.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_button_uri</code> - From the <a href="#client-settings-format">Client Settings object</a>, as an anchor link styled as the specified <code class="language-plaintext highlighter-rouge">profile_button_style</code> <a href="#button-styles">Button Styles</a> and when clicked opens a new tab via the <code class="language-plaintext highlighter-rouge">target="_blank"</code> and <code class="language-plaintext highlighter-rouge">rel="noopener noreferrer nofollow"</code> anchor attributes.
If a Client sets this value to <code class="language-plaintext highlighter-rouge">null</code>, then the Server MUST NOT render this button link.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_name</code> - From the <a href="#client-settings-format">Client Settings object</a>, as text of the Client‚Äôs contact name.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_email</code> - From the <a href="#client-settings-format">Client Settings object</a>, as a <code class="language-plaintext highlighter-rouge">mailto:</code> link to the Client‚Äôs contact email.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_phone</code> - From the <a href="#client-settings-format">Client Settings object</a>, as a <code class="language-plaintext highlighter-rouge">tel:</code> link to the Client‚Äôs contact phone number, where the link <code class="language-plaintext highlighter-rouge">href</code> is formatted as an <a href="https://en.wikipedia.org/wiki/E.123">E.123</a> international phone number and the link text is displayed as the Server‚Äôs locale format.
If a Client sets this value to <code class="language-plaintext highlighter-rouge">null</code>, then the Server MUST NOT render this contact phone number link.</li>
  <li><code class="language-plaintext highlighter-rouge">profile_contact_website</code> - From the <a href="#client-settings-format">Client Settings object</a>, as an anchor link when clicked opens a new tab via the <code class="language-plaintext highlighter-rouge">target="_blank"</code> and <code class="language-plaintext highlighter-rouge">rel="noopener noreferrer nofollow"</code> anchor attributes.
If a Client sets this value to <code class="language-plaintext highlighter-rouge">null</code>, then the Server MUST NOT render this contact website link.</li>
</ul>

<p>Additionally, for Clients registered and approved for scopes that have <code class="language-plaintext highlighter-rouge">authorization_code</code> in the scope‚Äôs <code class="language-plaintext highlighter-rouge">grant_types</code> (thus allowing the Client to obtain user authorizations), Server MUST render a link on the Client profile entry for where users may go to view their current and previous authorization grants with the Client.</p>

<h2 id="11-extensions-">11. Extensions <a id="extensions" href="#extensions" class="permalink">üîó</a></h2>

<p><span style="background-color:yellow">TODO</span></p>

<h2 id="12-examples-">12. Examples <a id="examples" href="#examples" class="permalink">üîó</a></h2>

<p><span style="background-color:yellow">TODO</span></p>

<h2 id="13-security-considerations-">13. Security Considerations <a id="security" href="#security" class="permalink">üîó</a></h2>

<p>This specification describes a protocol by which a utility or other entity (a Server) can allow third parties (Clients) to register and obtain privileged access to the Server‚Äôs offered capabilities and data.
Because the functionality described in this specification enables access to private Server functionality and data, Servers MUST follow industry cybersecurity best practices when securing their implementations of this specification to prevent unintended or inadvertent access to privileged functionality or data to Clients who are not authorized.
These best practices include requiring HTTPS for API endpoints using the latest widely adopted encryption standards, undergoing regular security audits and penetration tests, and internally requiring security-focused process controls and data handling procedures.</p>

<p><span style="background-color:yellow">TODO: Security considerations on public directory descriptions, buttons, etc.</span></p>

<h3 id="131-restricted-access-">13.1. Restricted Access <a id="restricted-access" href="#restricted-access" class="permalink">üîó</a></h3>

<p>For unauthenticated endpoints (<a href="#auth-server-metadata">Authorization Server Metadata</a>, <a href="#client-registration-process">Client Registration Process</a>), while Servers can add <a href="#rate-limiting">rate limiting</a> configurations to protect their systems from being overwhelmed with requests, Servers MUST NOT add anti-bot blocking measures (e.g. captchas) that prevent automated requests from other systems.
The functionality described in this specification is intended to be able to be integrated in other platforms to allow those platforms to automate interactions with Servers on their users‚Äô behalf.</p>

<p>If <a href="#auth-server-metadata">Authorization Server Metadata</a> is referenced in a public <a href="/specs/cdsc-wg1-01/#metadata-endpoint">CDSC-WG1-01 Server Metadata endpoint</a>, then the <a href="#auth-server-metadata">Authorization Server Metadata</a> and <a href="#client-registration-process">Client Registration Process</a> must also be public.</p>

<p>Servers that wish to restrict access of by-default unauthenticated endpoints to certain Clients MUST configure well established authentication processes for Clients to ensure that only the approved Clients may access the restricted endpoint.
This specification does not describe specifically how Servers will authenticate Clients for by-default unauthenticated endpoints, as these restricted access protocols are context dependent.
For example, if a Server providing a private Client Registration endpoint as part of an existing logged in portal, then they can use that logged in portal‚Äôs session cookie to authenticate Client requests to the registration endpoint.</p>

<p>For authenticated endpoints (<a href="#clients-api">Clients API</a>, <a href="#client-settings-api">Client Settings API</a>, <a href="#client-updates-api">Client Updates API</a>, <a href="#scope-creds-api">Scope Credentials API</a>, <a href="#grants-api">Grants API</a>), Servers MUST authenticate requests using OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6750#section-2.1">Authorization Request Header Field</a> with access tokens obtained using the OAuth‚Äôs <a href="https://www.rfc-editor.org/rfc/rfc6749#section-5">Issuing an Access Token</a> process.</p>

<h3 id="132-rate-limiting-">13.2. Rate Limiting <a id="rate-limiting" href="#rate-limiting" class="permalink">üîó</a></h3>

<p>For unauthenticated endpoints (<a href="#auth-server-metadata">Authorization Server Metadata</a>, <a href="#client-registration-process">Client Registration Process</a>), Servers SHOULD configure rate limiting restrictions so that bots and misconfigured scripts will not flood and overwhelm the endpoints with requests, while still allowing legitimate and low-volume automated requests have access to the endpoints.</p>

<p>For authenticated endpoints (<a href="#clients-api">Clients API</a>, <a href="#client-settings-api">Client Settings API</a>, <a href="#client-updates-api">Client Updates API</a>, <a href="#scope-creds-api">Scope Credentials API</a>, <a href="#grants-api">Grants API</a>), Servers SHOULD configure rate limiting by Client and Scope Credential to ensure that individual Clients do not overwhelm Servers with authenticated API requests.
Additionally, Servers SHOULD configure rate limiting for unauthenticated or failed authentication requests to authenticated API endpoints to prevent brute force attempts to gain access to authenticated APIs.</p>

<h2 id="14-references-">14. References <a id="references" href="#references" class="permalink">üîó</a></h2>

<p><span style="background-color:yellow">TODO</span></p>

<h2 id="15-acknowledgments-">15. Acknowledgments <a id="acknowledgments" href="#acknowledgments" class="permalink">üîó</a></h2>

<p>The authors would like to thank the late Shuli Goodman, who was the Executive Director of LFEnergy, for her incredible leadership in initially organizing the Carbon Data Specification.</p>

<h2 id="16-authors-addresses-">16. Authors‚Äô Addresses <a id="authors-addresses" href="#authors-addresses" class="permalink">üîó</a></h2>

<p>Daniel Roesler<br />
UtilityAPI<br />
Email: <a href="mailto:daniel@utilityapi.com">daniel@utilityapi.com</a><br />
URI: <a href="https://utilityapi.com/">https://utilityapi.com/</a></p>

<hr />

<h1 id="other-drafts-">Other Drafts <a id="other-drafts" href="#other-drafts" class="permalink">üîó</a></h1>

<ul>
  <li>Maintainer‚Äôs draft: [<a href="https://daniel-utilityapi.github.io/Connectivity/specs/cdsc-wg1-02">Website</a>] [<a href="https://github.com/daniel-utilityapi/Connectivity/blob/main/specifications/cdsc-wg1-02.md">Code</a>]</li>
</ul>

                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-light pt-5 pb-5">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <h4>Connectivity Working Group:</h4>
                        <ul>
                            <li>
                                <a href="/Connectivity/"
                                    >Working Group website</a>
                                (this website!)
                            </li>
                            <li>
                                <a href="/Connectivity/use-cases"
                                    >Use Cases</a>
                            </li>
                            <li>
                                <a href="/Connectivity/specs"
                                    >Specifications</a>
                            </li>
                            <li>
                                <a href="https://github.com/carbon-data-specification/Connectivity" target="_blank"
                                    >Github Repository
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                            </li>
                            <li>
                                <a href="https://github.com/carbon-data-specification/Connectivity/tree/main/meetings" target="_blank"
                                    >Meeting Minutes
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                            </li>
                            <li>
                                <a href="https://github.com/carbon-data-specification/Connectivity/pulls" target="_blank"
                                    >Active Pull Requests
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                            </li>
                            <li>
                                <a href="https://lists.lfenergy.org/g/cdsc-connectivity-wg" target="_blank"
                                    >Mailing List
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                            </li>
                            <li>
                                <a href="https://lists.lfenergy.org/g/cdsc-connectivity-wg/calendar" target="_blank"
                                    >Event Calendar
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                            </li>
                            <li>
                                <a href="https://slack.lfenergy.org/" target="_blank"
                                    >Slack
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                (channel: <code>#cdsc-connectivity-wg</code>)
                            </li>
                        </ul>
                    </div>
                    <div class="col">
                        <h4>CDSC / Linux Foundation:</h4>
                        <ul>
                            <li>
                                <a href="https://www.linuxfoundation.org/" target="_blank"
                                    >Linux Foundation
                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                <ul>
                                    <li>
                                        <a href="https://www.lfenergy.org/" target="_blank"
                                            >LF Energy
                                            <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                        <ul>
                                            <li>
                                                <a href="https://carbondataspec.org" target="_blank"
                                                    >Carbon Data Specification Consortium (CDSC)
                                                    <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                                <ul>
                                                    <li>
                                                        <a href="https://github.com/carbon-data-specification/Connectivity" target="_blank"
                                                            >Connectivity Working Group (WG1)
                                                            <svg class="svgicon"><use href="#fa-external-link"/></svg></a> (i.e. this working group)
                                                    </li>
                                                    <li>
                                                        <a href="https://github.com/carbon-data-specification/Power-Systems-Data" target="_blank"
                                                            >Power Systems Data Working Group (WG2)
                                                            <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                                    </li>
                                                    <li>
                                                        <a href="https://github.com/carbon-data-specification/Customer-Data" target="_blank"
                                                            >Customer Data Working Group (WG3)
                                                            <svg class="svgicon"><use href="#fa-external-link"/></svg></a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Scripts -->
        <script src="/Connectivity/assets/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script>
        
        
    </body>
</html>

